parcelRequire=function(e,r,n,t){var i="function"==typeof parcelRequire&&parcelRequire,o="function"==typeof require&&require;function u(n,t){if(!r[n]){if(!e[n]){var f="function"==typeof parcelRequire&&parcelRequire;if(!t&&f)return f(n,!0);if(i)return i(n,!0);if(o&&"string"==typeof n)return o(n);var c=new Error("Cannot find module '"+n+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[n][1][r]||r};var l=r[n]=new u.Module(n);e[n][0].call(l.exports,p,l,l.exports,this)}return r[n].exports;function p(e){return u(p.resolve(e))}}u.isParcelRequire=!0,u.Module=function(e){this.id=e,this.bundle=u,this.exports={}},u.modules=e,u.cache=r,u.parent=i,u.register=function(r,n){e[r]=[function(e,r){r.exports=n},{}]};for(var f=0;f<n.length;f++)u(n[f]);if(n.length){var c=u(n[n.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=c:"function"==typeof define&&define.amd?define(function(){return c}):t&&(this[t]=c)}return u}({"PdPa":[function(require,module,exports) {
var o="function";module.exports=function(n){return Boolean(n)&&typeof n===o};
},{}],"VKa5":[function(require,module,exports) {
var e="object";module.exports=function(o){return null!==o&&typeof o===e};
},{}],"xzHV":[function(require,module,exports) {
var e=require("./isObject"),r=Object.prototype.hasOwnProperty;module.exports=function(t,o){return e(t)&&r.call(t,o)};
},{"./isObject":"VKa5"}],"tSs+":[function(require,module,exports) {
var t={dispose:function(){}};function e(){}e.prototype.schedule=function(e){return e(),t},e.prototype.scheduleWithState=function(e,o){return o(this,e),t},module.exports=e;
},{}],"i63l":[function(require,module,exports) {
var e=require("./support/isFunction"),r=require("./support/hasOwn"),t=require("./schedulers/ImmediateScheduler");function o(r){var o=r||{};this.syncRefCount=0,this.expired=o.expired||[],this.unsafeMode=o.unsafeMode||!1,this.collectionScheduler=o.collectionScheduler||new t,this.cache={},this._pathObservers=[],e(o.comparator)&&(this.comparator=o.comparator),e(o.errorSelector)&&(this.errorSelector=o.errorSelector),e(o.onChange)&&(this.onChange=o.onChange)}function n(e,r){if(null===e&&null===r)return!0;if("object"!=typeof e||"object"!=typeof r)return!1;for(var t,o=Object.keys(e),s=0;s<o.length;s++)if(n(e[t=o[s]],r[t]))return!0;return!1}o.prototype.errorSelector=function(e,r){return r},o.prototype.comparator=function(e,t){return r(e,"value")&&r(t,"value")?e.value===t.value&&e.$type===t.$type&&e.$expires===t.$expires:e===t},o.prototype.onObserve=function(e,r){this._pathObservers.forEach(function(t){n(t.pathMap,r)&&t.observer.onNext(e)})},o.prototype.hasObservers=function(){return this._pathObservers.length>0},module.exports=o;
},{"./support/isFunction":"PdPa","./support/hasOwn":"xzHV","./schedulers/ImmediateScheduler":"tSs+"}],"VjZC":[function(require,module,exports) {
function t(t){this._model=t._materialize().treatErrorsAsValues()}t.prototype.get=function(t){return this._model.get.apply(this._model,t)._toJSONG()},t.prototype.set=function(t){return this._model.set(t)._toJSONG()},t.prototype.call=function(t,o,e,r){var l=[t,o,e].concat(r);return this._model.call.apply(this._model,l)._toJSONG()},module.exports=t;
},{}],"Siym":[function(require,module,exports) {
module.exports={GetRequest:"GET"};
},{}],"YpRK":[function(require,module,exports) {
module.exports=function(r,e){for(var n=-1,o=r.length,t=new Array(o);++n<o;)t[n]=e(r[n],n,r);return t};
},{}],"OCe+":[function(require,module,exports) {
var e=Array.isArray;function r(e,r){var f=r.from=e.from||0,t=r.to=e.to||"number"==typeof e.length&&r.from+e.length-1||0;r.rangeOffset=r.from,r.loaded=!0,f>t&&(r.empty=!0)}function f(r,f){f.done=!1;var t=f.isObject=!(!r||"object"!=typeof r);f.isArray=t&&e(r),f.arrayOffset=0}module.exports=function(e,t){if(void 0===t.isArray&&f(e,t),t.isArray){var o;do{if(t.loaded&&t.rangeOffset>t.to&&(++t.arrayOffset,t.loaded=!1),t.arrayOffset>=e.length){t.done=!0;break}var a=e[t.arrayOffset];if("object"===typeof a){if(t.loaded||r(a,t),t.empty)continue;o=t.rangeOffset++}else++t.arrayOffset,o=a}while(void 0===o);return o}return t.isObject?(t.loaded||r(e,t),t.rangeOffset>t.to?void(t.done=!0):t.rangeOffset++):(t.done=!0,e)};
},{}],"yc0p":[function(require,module,exports) {
var e=require("./../lib/iterateKeySet"),r=Array.isArray;function n(r,t,u){var i,o=t[u],l={},a=u+1;i=e(o,l);do{var d=r[i];d||(a===t.length?r[i]=null:d=r[i]={}),a<t.length&&n(d,t,a),l.done||(i=e(o,l))}while(!l.done)}module.exports=function(e){return e.reduce(function(e,r){return n(e,r,0),e},{})};
},{"./../lib/iterateKeySet":"OCe+"}],"560A":[function(require,module,exports) {
var e=require("./iterateKeySet");module.exports=function r(o,t,a){for(var i=o,v=!0;v&&a<t.length;++a){var d=t[a];if(d&&"object"===typeof d){var n={},f=e(d,n),u=a+1;do{var l=i[f];(v=void 0!==l)&&(v=r(l,t,u)),f=e(d,n)}while(v&&!n.done);break}v=void 0!==(i=i[d])}return v};
},{"./iterateKeySet":"OCe+"}],"u9rb":[function(require,module,exports) {
var r=require("./hasIntersection");module.exports=function(e,n){for(var t=[],o=-1,u=0,a=e.length;u<a;++u)r(n,e[u],0)||(t[++o]=e[u]);return t};
},{"./hasIntersection":"560A"}],"6SCU":[function(require,module,exports) {
var r=require("./hasIntersection");module.exports=function(e,n){for(var t=[],o=-1,a=0,u=e.length;a<u;++a){var h=e[a];r(n[h.length],h,0)||(t[++o]=h)}return t};
},{"./hasIntersection":"560A"}],"6ze2":[function(require,module,exports) {
var r=Array.isArray,e="object",t="string",n="number",f=9007199254740991,o=16,u=17,s=Math.abs,a=/^(0|(\-?[1-9][0-9]*))$/;function i(r){return null!==r&&typeof r===e}function l(r,e,t){var n,f,o,u,s,a,i,c,v,h,b,d,k,m,A=p(String(e)),I=Object.create(null),S=[],j=-1,x=0,w=[],C=0;if(u=[],s=-1,e<t-1){for(a=g(r,u);++s<a;)I[o=(f=l(r[n=u[s]],e+1,t)).code]?f=I[o]:(S[x++]=o,f=I[o]={keys:[],sets:f.sets}),A=p(A+n+o),y(n)&&f.keys.push(parseInt(n,10))||f.keys.push(n);for(;++j<x;)if((a=(u=(f=I[n=S[j]]).keys).length)>0)for(c=-1,v=(i=f.sets).length,k=u[0];++c<v;){for(b=-1,d=(h=i[c]).length,(m=new Array(d+1))[0]=a>1&&u||k;++b<d;)m[b+1]=h[b];w[C++]=m}}else for(a=g(r,u),w[C++]=a>1?[u]:u;++s<a;)A=p(A+u[s]);return{code:A,sets:w}}function c(e){for(var t=-1,n=e.length;++t<n;){var f=e[t];r(f)&&(e[t]=v(f))}return e}function v(r){for(var e=-1,t=r.length-1,n=t>0;++e<=t;){var f=r[e];if(!y(f)){n=!1;break}r[e]=parseInt(f,10)}if(!0===n){r.sort(h);var o=r[0],u=r[t];if(u-o<=t)return{from:o,to:u}}return r}function h(r,e){return r-e}function g(r,e,t){var n=0;for(var f in r)e[n++]=f;return n>1&&e.sort(t),n}function p(r){for(var e=5381,t=-1,n=r.length;++t<n;)e=(e<<5)+e+r.charCodeAt(t);return String(e)}function y(r){var e=r,i=typeof r;if(i===t){var l=r.length;if(0===l||l>u)return!1;if(!a.test(r))return!1;if(l<o)return!0;e=+r}else if(i!==n)return!1;return e%1==0&&s(e)<=f}module.exports=function(r){var e,t=[],n=0;for(var f in r)if(y(f)&&i(e=r[f]))for(var o=l(e,0,parseInt(f,10)).sets,u=-1,s=o.length;++u<s;)t[n++]=c(o[u]);return t},module.exports._isSafeNumber=y;
},{}],"zibx":[function(require,module,exports) {
var e=require("./toPaths"),r=require("./toTree");module.exports=function(t){var u=t.reduce(function(e,r){var t=r.length;return e[t]||(e[t]=[]),e[t].push(r),e},{});return Object.keys(u).forEach(function(e){u[e]=r(u[e])}),e(u)};
},{"./toPaths":"6ze2","./toTree":"yc0p"}],"+MPV":[function(require,module,exports) {
function r(r,e){for(var n=[],o=r.length,t=e||0;t<o;t++)n[t]=r[t];return n}module.exports=r;
},{}],"0aSX":[function(require,module,exports) {
module.exports=function(r,e,n){var o,t,f,l=[];for(o=0,f=r.length;o<f;++o)l[o]=r[o];for(t=n||0,f=e.length;t<f;++t,++o)l[o]=e[t];return l};
},{}],"rlKQ":[function(require,module,exports) {
module.exports={$ref:"ref",$atom:"atom",$error:"error"};
},{}],"rEo8":[function(require,module,exports) {
module.exports={innerReferences:"References with inner references are not allowed.",circularReference:"There appears to be a circular reference, maximum reference following exceeded."};
},{}],"dQ9v":[function(require,module,exports) {
var r=require("./support/cloneArray"),e=require("./support/types").$ref,o=require("./errors");module.exports=function(t,n,u){for(var i,f,a=t,p=n,c=-1,l=p.length,s=0;++c<l;){if(f=(i=a[p[c]])&&i.$type,!i||f&&f!==e){a=i;break}if(f&&f===e&&c+1<l){var h=new Error(o.innerReferences);throw h.throwToNext=!0,h}if(c+1===l&&(f===e&&(c=-1,l=(p=i.value).length,i=t,s++),s>u))throw new Error(o.circularReference);a=i}return[a,r(p)]};
},{"./support/cloneArray":"+MPV","./support/types":"rlKQ","./errors":"rEo8"}],"9BGP":[function(require,module,exports) {
var e=require("./iterateKeySet"),r=require("./support/cloneArray"),t=require("./support/catAndSlice"),o=require("./support/types"),n=o.$ref,l=require("./followReference");function u(o,i,p,f,a,c,y){if(void 0!==o){if(!(null===o||o.$type&&o.$type!==n||"object"!=typeof o||o.$type===n&&f===p.length)){var h,s,v=p[f],d=f+1,g=!1,q=v;"object"==typeof v&&(q=e(v,g={}));do{h=o[q];var $=c.length;if(null!==q&&(c[$]=q),h&&h.$type===n&&d<p.length){var b=l(i,h.value,y);h=b[0],s=r(b[1])}else s=c;u(h,i,p,d,a,s,y),c.length=$,g&&!g.done&&(q=e(v,g))}while(g&&!g.done)}}else a[a.length]=t(c,p,f)}module.exports=function(e,r,t){var o=[];return r.forEach(function(r){u(e,e,r,0,o,[],t)}),o};
},{"./iterateKeySet":"OCe+","./support/cloneArray":"+MPV","./support/catAndSlice":"0aSX","./support/types":"rlKQ","./followReference":"dQ9v"}],"5Dc/":[function(require,module,exports) {
"use strict";function r(r){if(null==r)return 1;if(Array.isArray(r))throw new Error("Unexpected Array found in keySet: "+JSON.stringify(r));return"object"==typeof r?n(r):1}function n(r){var n=r.to,e=r.length;if(null!=n){if(isNaN(n)||parseInt(n,10)!==n)throw new Error("Invalid range, 'to' is not an integer: "+JSON.stringify(r));var t=r.from||0;if(isNaN(t)||parseInt(t,10)!==t)throw new Error("Invalid range, 'from' is not an integer: "+JSON.stringify(r));return t<=n?n-t+1:0}if(null!=e){if(isNaN(e)||parseInt(e,10)!==e)throw new Error("Invalid range, 'length' is not an integer: "+JSON.stringify(r));return e}throw new Error("Invalid range, expected 'to' or 'length': "+JSON.stringify(r))}function e(n){if(0===n.length)throw new Error("All paths must have length larger than zero.");for(var e=1,t=0;t<n.length;t++){var i=n[t];if(Array.isArray(i)){for(var o=0,a=0;a<i.length;a++){o+=r(i[a])}e*=o}else e*=r(i)}return e}module.exports=e;
},{}],"GOy5":[function(require,module,exports) {
module.exports={iterateKeySet:require("./iterateKeySet"),toTree:require("./toTree"),pathsComplementFromTree:require("./pathsComplementFromTree"),pathsComplementFromLengthTree:require("./pathsComplementFromLengthTree"),hasIntersection:require("./hasIntersection"),toPaths:require("./toPaths"),collapse:require("./collapse"),optimizePathSets:require("./optimizePathSets"),pathCount:require("./pathCount")};
},{"./iterateKeySet":"OCe+","./toTree":"yc0p","./pathsComplementFromTree":"u9rb","./pathsComplementFromLengthTree":"6SCU","./hasIntersection":"560A","./toPaths":"6ze2","./collapse":"zibx","./optimizePathSets":"9BGP","./pathCount":"5Dc/"}],"cTsu":[function(require,module,exports) {
module.exports="$";
},{}],"IrRR":[function(require,module,exports) {
var e=require("./reservedPrefix");module.exports=e+"_";
},{"./reservedPrefix":"cTsu"}],"hhAM":[function(require,module,exports) {
module.exports=require("./privatePrefix")+"ref";
},{"./privatePrefix":"IrRR"}],"RaVg":[function(require,module,exports) {
var e=require("./../internal/ref");module.exports=function(r,n){var t=n.$_refsLength||0;n[e+t]=r,n.$_refsLength=t+1,r.$_refIndex=t,r.$_context=n};
},{"./../internal/ref":"hhAM"}],"wLEx":[function(require,module,exports) {
module.exports="ref";
},{}],"WGBz":[function(require,module,exports) {
module.exports=Date.now;
},{}],"nVz8":[function(require,module,exports) {
module.exports=0;
},{}],"BnFt":[function(require,module,exports) {
module.exports=1;
},{}],"LHwn":[function(require,module,exports) {
var e=require("./../support/now"),r=require("./../values/expires-now"),u=require("./../values/expires-never");module.exports=function(i){var n=i.$expires;return null!=n&&n!==u&&n!==r&&n<e()};
},{"./../support/now":"WGBz","./../values/expires-now":"nVz8","./../values/expires-never":"BnFt"}],"I3J4":[function(require,module,exports) {
var e="object";module.exports=function(o){return null==o||typeof o!==e};
},{}],"S+8A":[function(require,module,exports) {
module.exports=function(e,$){var _=$.$_prev,t=$.$_next;t&&(t.$_prev=_),_&&(_.$_next=t),$.$_prev=$.$_next=void 0,$===e.$_head&&(e.$_head=t),$===e.$_tail&&(e.$_tail=_)};
},{}],"uEXV":[function(require,module,exports) {
var e=require("./../lru/splice");module.exports=function(i,r,u){return i.$_invalidated||(i.$_invalidated=!0,r.push(i),e(u,i)),i};
},{"./../lru/splice":"S+8A"}],"/mPE":[function(require,module,exports) {
var r=1;module.exports=function(){return r++},module.exports.getCurrentVersion=function(){return r};
},{}],"wbKo":[function(require,module,exports) {
module.exports="error";
},{}],"LNYZ":[function(require,module,exports) {
var e=require("./../support/isObject");module.exports=function(r){return e(r)&&r.$size||0};
},{"./../support/isObject":"VKa5"}],"FMkU":[function(require,module,exports) {
var e=require("./../support/isObject");module.exports=function(r){return e(r)&&r.$timestamp||void 0};
},{"./../support/isObject":"VKa5"}],"tZba":[function(require,module,exports) {
var e=require("./../support/now"),r=require("../values/expires-now"),u=require("../values/expires-never");module.exports=function(i){var n=i.$expires;return null!=n&&n!==u&&(n===r||n<e())};
},{"./../support/now":"WGBz","../values/expires-now":"nVz8","../values/expires-never":"BnFt"}],"D2aE":[function(require,module,exports) {
var r=require("./../internal/privatePrefix"),e=require("./../support/hasOwn"),i=Array.isArray,a=require("./../support/isObject");module.exports=function(t){var u=t;if(a(u)){u=i(t)?[]:{};var s=t;for(var n in s)n.substr(0,2)!==r&&e(s,n)&&(u[n]=s[n])}return u};
},{"./../internal/privatePrefix":"IrRR","./../support/hasOwn":"xzHV","./../support/isObject":"VKa5"}],"/6PV":[function(require,module,exports) {
var e=require("./isObject");module.exports=function(r){return e(r)&&r.$expires||void 0};
},{"./isObject":"VKa5"}],"xfSo":[function(require,module,exports) {
module.exports="atom";
},{}],"4utU":[function(require,module,exports) {
var e=require("./../support/now"),r=require("../values/expires-now"),t=50,i=require("./../support/clone"),o=Array.isArray,p=require("./../support/getSize"),u=require("./../support/getExpires"),s=require("./../types/atom");module.exports=function(a,l,n){var d=0,v=a,$=l;if($){var f=v.$_modelCreated;v=i(v),d=p(v),v.$type=$,v.$_prev=void 0,v.$_next=void 0,v.$_modelCreated=f||!1}else v={$type:s,value:n,$_prev:void 0,$_next:void 0,$_modelCreated:!0};if(null==n)d=t+1;else if(null==d||d<=0)switch(typeof n){case"object":d=o(n)?t+n.length:t+1;break;case"string":d=t+n.length;break;default:d=t+1}var y=u(v);return"number"==typeof y&&y<r&&(v.$expires=e()+-1*y),v.$size=d,v};
},{"./../support/now":"WGBz","../values/expires-now":"nVz8","./../support/clone":"D2aE","./../support/getSize":"LNYZ","./../support/getExpires":"/6PV","./../types/atom":"xfSo"}],"CalJ":[function(require,module,exports) {
module.exports=function(e,t,o,n,a){return e.$_key=o,e.$_parent=t,void 0!==n&&(e.$_version=n),e.$_absolutePath||(e.$_absolutePath=a.slice(0,a.index).concat(o)),t[o]=e,e};
},{}],"zWuJ":[function(require,module,exports) {
var e=require("./../internal/ref");module.exports=function(r,n){for(var t=r.$_refsLength||0,o=n.$_refsLength||0,f=-1;++f<t;){var i=r[e+f];void 0!==i&&(i.$_context=n,n[e+(o+f)]=i,r[e+f]=void 0)}return n.$_refsLength=t+o,r.$_refsLength=void 0,n};
},{"./../internal/ref":"hhAM"}],"xIXA":[function(require,module,exports) {
var e=require("./../internal/ref");module.exports=function(r){for(var n=-1,t=r.$_refsLength||0;++n<t;){var o=r[e+n];null!=o&&(o.$_context=o.$_refIndex=r[e+n]=void 0)}return r.$_refsLength=void 0,r};
},{"./../internal/ref":"hhAM"}],"ryUb":[function(require,module,exports) {
var e=require("./../internal/ref");module.exports=function(r){var n=r.$_context;if(n){for(var t=(r.$_refIndex||0)-1,f=(n.$_refsLength||0)-1;++t<=f;)n[e+t]=n[e+(t+1)];n.$_refsLength=f,r.$_refIndex=r.$_context=n=void 0}return r};
},{"./../internal/ref":"hhAM"}],"cJVv":[function(require,module,exports) {
var e=require("./../types/ref"),r=require("./../lru/splice"),u=require("./../support/isObject"),i=require("./../support/unlinkBackReferences"),n=require("./../support/unlinkForwardReference");module.exports=function(p,t,o,s){if(u(p)){var c=p.$type;return c&&(c===e&&n(p),r(s,p)),i(p),t[o]=p.$_parent=void 0,!0}return!1};
},{"./../types/ref":"wLEx","./../lru/splice":"S+8A","./../support/isObject":"VKa5","./../support/unlinkBackReferences":"xIXA","./../support/unlinkForwardReference":"ryUb"}],"QqkK":[function(require,module,exports) {
var e=require("./../support/hasOwn"),r=require("./../internal/reservedPrefix"),t=require("./../support/removeNode");module.exports=function u(i,n,o,a,s){if(t(i,n,o,a)){if(void 0!==i.$type&&s&&i.$_absolutePath&&(s.hasInvalidatedResult=!0),null==i.$type)for(var l in i)l[0]!==r&&e(i,l)&&u(i[l],i,l,a,s);return!0}return!1};
},{"./../support/hasOwn":"xzHV","./../internal/reservedPrefix":"cTsu","./../support/removeNode":"cJVv"}],"rX5+":[function(require,module,exports) {
var e=require("./../support/isObject"),r=require("./../support/transferBackReferences"),s=require("./../support/removeNodeAndDescendants");module.exports=function(t,u,n,o,p,c){return t===u?t:(e(t)&&(r(t,u),s(t,n,o,p,c)),n[o]=u,u)};
},{"./../support/isObject":"VKa5","./../support/transferBackReferences":"zWuJ","./../support/removeNodeAndDescendants":"QqkK"}],"XHDK":[function(require,module,exports) {
var r=require("./../internal/ref");module.exports=function(e,n){var i=[e],o=0;do{var a=i[o];if(a&&a.$_version!==n){a.$_version=n,i[o++]=a.$_parent;for(var t=-1,v=a.$_refsLength||0;++t<v;)i[o++]=a[r+t]}}while(--o>-1);return e};
},{"./../internal/ref":"hhAM"}],"vcMd":[function(require,module,exports) {
var e=require("./../support/removeNode"),r=require("./../support/updateBackReferenceVersions");module.exports=function(o,u,i,n){var s=o;do{var p=s.$_parent;(s.$size=(s.$size||0)-u)<=0&&null!=p?e(s,p,s.$_key,i):s.$_version!==n&&r(s,n),s=p}while(s);return o};
},{"./../support/removeNode":"cJVv","./../support/updateBackReferenceVersions":"XHDK"}],"o9+X":[function(require,module,exports) {
module.exports=function(e,t){var n=e.slice(0,e.depth);return n[n.length]=t,n};
},{}],"c8dX":[function(require,module,exports) {
var e=require("./../types/ref"),r=require("./../types/error"),i=require("./../support/getSize"),u=require("./../support/getTimestamp"),t=require("./../support/isObject"),p=require("./../support/isExpired"),s=require("./../support/isFunction"),o=require("./../support/wrapNode"),l=require("./../support/insertNode"),n=require("./../support/expireNode"),a=require("./../support/replaceNode"),d=require("./../support/updateNodeAncestors"),f=require("./../support/reconstructPath");module.exports=function(v,q,$,c,m,y,N,x,z,_,g,b){var h,j,w,A,E,F,O,P=q&&void 0!==q.value?q.value:q;if(P===$){if(null===$)return q=o($,void 0,$),v=d(v,-q.$size,z,N),q=l(q,v,c,void 0,y);if(void 0===$)return $;if((A=t(q))&&null==(j=q.$type))return null==q.$_parent&&l(q,v,c,N,y),q}else(A=t(q))&&(j=q.$type);if(j!==e){if((E=t($))&&(w=$.$type),A&&!j&&(null==$||E&&!w))return q}else{if(null==$)return p(q)?void n(q,x,z):q;if((E=t($))&&(w=$.$type)===e)if(q===$){if(null!=q.$_parent)return q}else if(F=q.$timestamp,O=$.$timestamp,!p(q)&&!p($)&&O<F)return}if(j&&E&&!w)return l(a(q,$,v,c,z,b),v,c,void 0,y);if(w||!E){if(w===r&&s(g)&&(w=($=g(f(m,c),$)).$type||w),w&&q===$)null==q.$_parent&&(q=o(q,w,q.value),v=d(v,-q.$size,z,N),q=l(q,v,c,N,y));else{var S=!0;(j&&!p(q)||!A)&&(S=u($)<u(q)==!1)&&(j||w)&&s(_)&&(S=!_(P,$,y.slice(0,y.index))),S&&($=o($,w,w?$.value:$),h=i(q)-i($),q=a(q,$,v,c,z,b),v=d(v,h,z,N),q=l(q,v,c,N,y))}p(q)&&n(q,x,z)}else null==q&&(q=l({},v,c,void 0,y));return q};
},{"./../types/ref":"wLEx","./../types/error":"wbKo","./../support/getSize":"LNYZ","./../support/getTimestamp":"FMkU","./../support/isObject":"VKa5","./../support/isExpired":"tZba","./../support/isFunction":"PdPa","./../support/wrapNode":"4utU","./../support/insertNode":"CalJ","./../support/expireNode":"uEXV","./../support/replaceNode":"rX5+","./../support/updateNodeAncestors":"vcMd","./../support/reconstructPath":"o9+X"}],"hlai":[function(require,module,exports) {
function r(r){r.prototype=Object.create(Error.prototype,{constructor:{value:Error,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(r,Error):r.__proto__=Error}module.exports=r;
},{}],"1vC+":[function(require,module,exports) {
var r=require("./applyErrorPrototype");function t(){var r=new Error("`null` is not allowed in branch key positions.");return r.name="NullInPathError",Object.setPrototypeOf&&Object.setPrototypeOf(r,Object.getPrototypeOf(this)),Error.captureStackTrace&&Error.captureStackTrace(r,t),r}r(t),module.exports=t;
},{"./applyErrorPrototype":"hlai"}],"T5SZ":[function(require,module,exports) {
var e=require("falcor-path-utils").toTree,r=require("./../support/createHardlink"),i=require("./../types/ref"),n=require("./../support/isAlreadyExpired"),t=require("./../support/isFunction"),u=require("./../support/isPrimitive"),o=require("./../support/expireNode"),a=require("falcor-path-utils").iterateKeySet,p=require("./../support/incrementVersion"),s=require("./../support/mergeJSONGraphNode"),d=require("./../errors/NullInPathError");function l(e,r,i,n,t,u,o,p,s,d,v,f,c,x,q,g,y,$){for(var _={},m=r<e.length-1,N=e[r],b=a(N,_),k=f.index;;){v.depth=r;var w=h(i,n,t,u,o,p,b,m,!1,v,f,c,x,q,g,y,$);v[r]=b,v.index=r,f[f.index++]=b;var O=w[0],E=w[1];if(O&&(m?l(e,r+1,i,E,O,u,w[3],w[2],s,d,v,f,c,x,q,g,y,$):(s.push(v.slice(0,v.index+1)),d.push(f.slice(0,f.index)))),b=a(N,_),_.done)break;f.index=k}}function v(e,i,t,a,p,s,d,l,v,f,c,x){var q=i.value;if(s.splice(0,s.length),s.push.apply(s,q),n(i))return s.index=q.length,o(i,l,v),[void 0,e,a,t];var g=0,y=i,$=q.length-1,_=i=e,m=a=t;do{var N=q[g],b=g<$;s.index=g;var k=h(e,_,i,t,m,a,N,b,!0,p,s,d,l,v,f,c,x);if(i=k[0],u(i))return s.index=g,k;_=k[1],a=k[2],m=k[3]}while(g++<$);return s.index=g,y.$_context!==i&&r(y,i),[i,_,a,m]}function h(e,r,n,t,o,a,p,l,h,f,c,x,q,g,y,$,_){for(var m=n.$type;m===i;){var N=v(e,n,t,a,f,c,x,q,g,y,$,_);if(n=N[0],u(n))return N;r=N[1],a=N[2],o=N[3],m=n.$type}if(void 0!==m)return[n,r,a,o];if(null==p){if(l)throw new d;n&&(p=n.$_key)}else o=a,n=(r=n)[p],a=o&&o[p];return[n=s(r,n,a,p,f,c,x,q,g,y,$,_),r,a,o]}module.exports=function(r,i,n,u,o,a){for(var s=r._root,d=s,v=s.expired,h=p(),f=s.cache,c=f.$_version,x=[],q=[],g=[],y=[],$=-1,_=i.length;++$<_;)for(var m=i[$],N=m.paths,b=m.jsonGraph,k=-1,w=N.length;++k<w;){var O=N[k];q.index=0,l(O,0,f,f,f,b,b,b,g,y,x,q,h,v,d,o,u,a)}if(s.hasObservers()){var E=i.reduce(function(e,r){return e.concat(r.paths)},[]),G=e(E);s.onObserve(E,G)}var P=f.$_version,S=s.onChange;return t(S)&&c!==P&&S(),[g,y]};
},{"falcor-path-utils":"GOy5","./../support/createHardlink":"RaVg","./../types/ref":"wLEx","./../support/isAlreadyExpired":"LHwn","./../support/isFunction":"PdPa","./../support/isPrimitive":"I3J4","./../support/expireNode":"uEXV","./../support/incrementVersion":"/mPE","./../support/mergeJSONGraphNode":"c8dX","./../errors/NullInPathError":"1vC+"}],"DAC8":[function(require,module,exports) {
var e=require("./../values/expires-never");module.exports=function($,r){if(r.$expires!==e){var _=$.$_head;if(_){if(_!==r){var i=r.$_prev,a=r.$_next;a&&(a.$_prev=i),i&&(i.$_next=a),r.$_prev=void 0,$.$_head=r,r.$_next=_,_.$_prev=r,r===$.$_tail&&($.$_tail=i)}}else $.$_head=$.$_tail=r}};
},{"./../values/expires-never":"BnFt"}],"wIJ9":[function(require,module,exports) {
var r=require("./../../internal/privatePrefix");module.exports=function(e){if(void 0===e)return e;var t,i,n,u=Object.keys(e);for(t={},i=0,n=u.length;i<n;i++){var a=u[i];a.substr(0,2)!==r&&(t[a]=e[a])}return t};
},{"./../../internal/privatePrefix":"IrRR"}],"Mdrc":[function(require,module,exports) {
var e=require("./../lru/promote"),r=require("./util/clone"),o=require("./../types/ref"),s=require("./../types/atom"),i=require("./../types/error");module.exports=function(l,t,a,u,p,f,n,v,d,y){if(t&&e(l._root,t),a){var h,j,m,q,c,$,_,b=null,x=!1,G=t&&t.$type,z=t&&t.value;if(t&&void 0!==t.value||(x=l._materialized),x)_={$type:s};else if(l._boxed)_=r(t);else if(y||G!==o)if(G===o||G===i)_=y?r(t):z;else if(y){var C=z&&"object"==typeof z,V=!t||!t.$_modelCreated;_=C||V?r(t):z}else _=z;else _=void 0;var g=!1;if(y){for((c=a.jsonGraph)||(g=!0,c=a.jsonGraph={},a.paths=[]),h=0,j=d-1;h<j;h++)c[q=v[h]]||(g=!0,c[q]={}),c=c[q];c[q=v[h]]=x?{$type:s}:_,n&&a.paths.push(n.slice(0,u))}else if(0===u)g=!0,a.json=_;else{for((c=a.json)||(g=!0,c=a.json={}),h=0;h<u-1;h++)c[m=n[h]]||(g=!0,c[m]=f[h]),b=c,$=m,c=c[m];m=n[h],void 0!==_&&(null!==m?(g=!0,c[m]=_):b[$]=_)}p.hasValues=g}};
},{"./../lru/promote":"DAC8","./util/clone":"wIJ9","./../types/ref":"wLEx","./../types/atom":"xfSo","./../types/error":"wbKo"}],"5v73":[function(require,module,exports) {
module.exports=require("../../support/isExpired");
},{"../../support/isExpired":"tZba"}],"MC/A":[function(require,module,exports) {
var e=require("./../support/createHardlink"),r=require("./../get/onValue"),t=require("./../get/util/isExpired"),i=require("./../types/ref"),n=require("./../lru/promote");function u(u,l,o,a,f,c,p){for(var v,g=o,d=f,k=a,q=0;;){if(0===q&&k.$_context?(q=d.length,v=k.$_context):v=g[d[q++]],v){var x=v.$type,b=x&&v.value||v;if(q<d.length){if(x){g=v;break}g=v;continue}if(g=v,x&&t(v))break;if(k.$_context||e(k,v),x===i){p?r(u,v,c,null,null,null,null,d,d.length,p):n(u._root,v),q=0,d=b,k=v,g=l;continue}break}g=void 0;break}if(q<d.length&&void 0!==g){for(var h=[],s=0;s<q;s++)h[s]=d[s];d=h}return[g,d,k]}module.exports=u;
},{"./../support/createHardlink":"RaVg","./../get/onValue":"Mdrc","./../get/util/isExpired":"5v73","./../types/ref":"wLEx","./../lru/promote":"DAC8"}],"lnLA":[function(require,module,exports) {
var e=require("./../get/followReference"),r=require("./../get/util/clone"),i=require("./../get/util/isExpired"),o=require("./../lru/promote"),t=require("./../types/ref"),l=require("./../types/atom"),u=require("./../types/error");module.exports=function(a,f,v){for(var d,n,s,p,h,b=a._root.cache,c=f.length,q=[],g=!1,k=!1,y=0,m=b,_=b,x=b,$=!0,w=!1;m&&y<c;){if(null!==(d=f[y++])&&(m=_[d],q[q.length]=d),!m){x=void 0,g=!0,$=!1;break}if((s=m.$type)===l&&void 0===m.value){x=void 0,$=!1,g=y<c;break}if(y<c){if(s===t){if(i(m)){w=!0,x=void 0;break}if(!(h=(p=e(a,b,b,m,m.value))[0])){x=void 0,m=void 0,$=!1;break}s=h.$type,m=h,q=p[1].slice(0)}if(s)break}else x=m;_=m}if(y<c&&!w){for(n=y;n<c;++n)if(null!==f[y]){k=!0;break}for(k?(g=!0,x=void 0):x=m,n=y;n<c;++n)null!==f[n]&&(q[q.length]=f[n])}if(x&&s&&(i(x)?x=void 0:o(a._root,x)),x&&s===u&&!a._treatErrorsAsValues)throw{path:y===c?f:f.slice(0,y),value:x.value};return x&&a._boxed?x=Boolean(s)&&!v?r(x):x:!x&&a._materialized?x={$type:l}:x&&(x=x.value),{value:x,shorted:g,optimizedPath:q,found:$}};
},{"./../get/followReference":"MC/A","./../get/util/clone":"wIJ9","./../get/util/isExpired":"5v73","./../lru/promote":"DAC8","./../types/ref":"wLEx","./../types/atom":"xfSo","./../types/error":"wbKo"}],"fn83":[function(require,module,exports) {
var r=require("./applyErrorPrototype");function e(r,t){var o=new Error("The boundPath of the model is not valid since a value or error was found before the path end.");return o.name="InvalidModelError",o.boundPath=r,o.shortedPath=t,Object.setPrototypeOf&&Object.setPrototypeOf(o,Object.getPrototypeOf(this)),Error.captureStackTrace&&Error.captureStackTrace(o,e),o}r(e),module.exports=e;
},{"./applyErrorPrototype":"hlai"}],"170P":[function(require,module,exports) {
var e=require("./../get/getValueSync"),r=require("./../errors/InvalidModelError");module.exports=function(t,o,a){var l,d,u,i,n,s=o,_=o;for(l=t._boxed,a=t._materialized,d=t._treatErrorsAsValues,t._boxed=!0,t._materialized=void 0===a||a,t._treatErrorsAsValues=!0,u=e(t,s.concat(null),!0),t._boxed=l,t._materialized=a,t._treatErrorsAsValues=d,s=u.optimizedPath,i=u.shorted,n=u.found,u=u.value;s.length&&null===s[s.length-1];)s.pop();if(n&&i)throw new r(_,s);return{path:s,value:u,shorted:i,found:n}};
},{"./../get/getValueSync":"lnLA","./../errors/InvalidModelError":"fn83"}],"tn89":[function(require,module,exports) {
var r=require("./../support/isObject");module.exports=function(e,t){var o=r(e)&&e.$type||void 0;return t&&o?"branch":o};
},{"./../support/isObject":"VKa5"}],"JnWd":[function(require,module,exports) {
var e=require("./../types/ref"),r=require("./../types/error"),p=require("./../support/getType"),u=require("./../support/getSize"),i=require("./../support/getTimestamp"),t=require("./../support/isExpired"),s=require("./../support/isPrimitive"),o=require("./../support/isFunction"),q=require("./../support/wrapNode"),a=require("./../support/expireNode"),d=require("./../support/insertNode"),n=require("./../support/replaceNode"),c=require("./../support/updateNodeAncestors"),v=require("./../support/updateBackReferenceVersions"),f=require("./../support/reconstructPath");module.exports=function(l,x,N,m,y,g,P,T,h,k,w,z,A,B){var E=p(x,g);if(y||g)E&&t(x)&&(E="expired",a(x,k,w)),(E&&E!==e||s(x))&&(x=n(x,{},l,N,w,B),x=d(x,l,N,h,T),x=v(x,h));else{var F=m,R=p(F),S=i(F)<i(x)==!1;if((E||R)&&o(z)&&(S=!z(x,F,T.slice(0,T.index))),S){R===r&&o(A)&&(R=(F=A(f(P,N),F)).$type||R),F=q(F,R,R?F.value:F);var V=u(x)-u(F);x=n(x,F,l,N,w,B),l=c(l,V,w,h),x=d(x,l,N,h,T)}}return x};
},{"./../types/ref":"wLEx","./../types/error":"wbKo","./../support/getType":"tn89","./../support/getSize":"LNYZ","./../support/getTimestamp":"FMkU","./../support/isExpired":"tZba","./../support/isPrimitive":"I3J4","./../support/isFunction":"PdPa","./../support/wrapNode":"4utU","./../support/expireNode":"uEXV","./../support/insertNode":"CalJ","./../support/replaceNode":"rX5+","./../support/updateNodeAncestors":"vcMd","./../support/updateBackReferenceVersions":"XHDK","./../support/reconstructPath":"o9+X"}],"t3P2":[function(require,module,exports) {
var e=require("falcor-path-utils").toTree,r=require("./../support/createHardlink"),i=require("./../types/ref"),n=require("./../get/getBoundValue"),t=require("./../support/isExpired"),u=require("./../support/isFunction"),a=require("./../support/isPrimitive"),o=require("./../support/expireNode"),p=require("falcor-path-utils").iterateKeySet,l=require("./../support/incrementVersion"),s=require("./../support/mergeValueOrInsertBranch"),v=require("./../errors/NullInPathError");function h(e,r,i,n,t,u,a,o,l,s,v,d,c,x,g,q){for(var $={},_=i<r.length-1,y=r[i],m=p(y,$),b=s.index;;){l.depth=i;var k=f(n,t,u,m,e,_,!1,l,s,v,d,c,x,g,q);l[i]=m,l.index=i,s[s.index++]=m;var w=k[0],O=k[1];if(w&&(_?h(e,r,i+1,n,O,w,a,o,l,s,v,d,c,x,g):(a.push(l.slice(0,l.index+1)),o.push(s.slice(0,s.index)))),m=p(y,$),$.done)break;s.index=b}}function d(e,i,n,u,p,l,s,v,h,d,c){var x=n.value;if(p.splice(0,p.length),p.push.apply(p,x),t(n))return p.index=x.length,o(n,s,v),[void 0,i];var g=n,q=i;if(null!=(n=n.$_context))q=n.$_parent||i,p.index=x.length;else{var $=0,_=x.length-1;q=n=i;do{var y=x[$],m=$<_;p.index=$;var b=f(i,q,n,y,e,m,!0,u,p,l,s,v,h,d,c);if(n=b[0],a(n))return p.index=$,b;q=b[1]}while($++<_);p.index=$,g.$_context!==n&&r(g,n)}return[n,q]}function f(e,r,n,t,u,o,p,l,h,f,c,x,g,q,$){for(var _=n.$type;_===i;){var y=d(u,e,n,l,h,f,c,x,g,q,$);if(n=y[0],a(n))return y;r=y[1],_=n.$type}if(o&&void 0!==_)return[n,r];if(null==t){if(o)throw new v;n&&(t=n.$_key)}else n=(r=n)[t];return[n=s(r,n,t,u,o,p,l,h,f,c,x,g,q,$),r]}module.exports=function(r,i,t,a,o){for(var p=r._root,s=p,v=p.expired,d=l(),f=r._path,c=p.cache,x=f.length?n(r,f).value:c,g=x.$_parent||c,q=c.$_version,$=[],_=[],y=[],m=f.length,b=-1,k=i.length;++b<k;){var w=i[b],O=w.path,V=w.value,B=f.slice(0);B.index=m,h(V,O,0,c,g,x,_,y,$,B,d,v,s,o,a)}if(p.hasObservers()){var E=i.map(function(e){return e.path}),I=e(E);p.onObserve(E,I)}var N=c.$_version,P=p.onChange;return u(P)&&q!==N&&P(),[_,y]};
},{"falcor-path-utils":"GOy5","./../support/createHardlink":"RaVg","./../types/ref":"wLEx","./../get/getBoundValue":"170P","./../support/isExpired":"tZba","./../support/isFunction":"PdPa","./../support/isPrimitive":"I3J4","./../support/expireNode":"uEXV","./../support/incrementVersion":"/mPE","./../support/mergeValueOrInsertBranch":"JnWd","./../errors/NullInPathError":"1vC+"}],"sUqC":[function(require,module,exports) {
var r=require("./applyErrorPrototype");function e(r){var t=new Error("An exception was thrown when making a request.");return t.name="InvalidSourceError",t.innerError=r,Object.setPrototypeOf&&Object.setPrototypeOf(t,Object.getPrototypeOf(this)),Error.captureStackTrace&&Error.captureStackTrace(t,e),t}r(e),module.exports=e;
},{"./applyErrorPrototype":"hlai"}],"a8C1":[function(require,module,exports) {
var r=require("./../support/array-map"),e=require("./../set/setJSONGraphs"),t=require("./../set/setPathValues"),a=require("./../errors/InvalidSourceError"),o=[],s={dispose:function(){}},u=function(u,n,p){var i,h,c=u.paths,l=n._root,d=l.errorSelector,f=l.comparator,_=n._path;try{h=n._source.set(u)}catch(r){return p(new a),s}var v=h.subscribe(function(r){if(!v||!v.disposed){n._path=o;var t=e(n,[{paths:c,jsonGraph:r.jsonGraph}],null,d,f);r.paths=t[1],n._path=_,i=r}},function(e){v&&v.disposed||(n._path=o,t(n,r(c,function(r){return{path:r,value:e}}),null,d,f),n._path=_,p(e))},function(){p(null,i)});return v};module.exports=u;
},{"./../support/array-map":"YpRK","./../set/setJSONGraphs":"T5SZ","./../set/setPathValues":"t3P2","./../errors/InvalidSourceError":"sUqC"}],"rEt7":[function(require,module,exports) {
module.exports=function(r,e,n){var o=e||0,t=-1,a=r.length-o;a<0&&(a=0),n>0&&a>n&&(a=n);for(var u=new Array(a);++t<a;)u[t]=r[t+o];return u};
},{}],"T135":[function(require,module,exports) {
module.exports=function(r,e){if(!r)return e;for(var n=-1,t=-1,o=r.length,f=e.length,u=new Array(o+f);++n<o;)u[n]=r[n];for(;++t<f;)u[n++]=e[t];return u};
},{}],"qxDZ":[function(require,module,exports) {
var e=require("falcor-path-utils").hasIntersection,r=require("./../support/array-slice"),t=require("./../support/array-concat"),n=require("falcor-path-utils").iterateKeySet;function l(e,a,h,o,g,i,f){for(var v=[],u=[],c=[];o<a.length;++o){var s=a[o];if(s&&"object"===typeof s){for(var p={},d=n(s,p);!p.done;){var q=h[d];if(void 0===q){var y=i.concat(d,r(a,o+1));c[c.length]=y;var b=g.concat(d,r(e,o+1+f));u[u.length]=b}else if(o===a.length-1)v[v.length]=t(g,[d]);else{for(var k=l(e,a,q,o+1,t(g,[d]),t(i,[d]),f),j=0,m=k[0].length;j<m;++j)v[v.length]=k[0][j];for(var x=0,I=k[1].length;x<I;++x)c[c.length]=k[1][x],u[u.length]=k[2][x]}d=n(s,p)}break}if(h=h[s],i[i.length]=a[o],g[g.length]=e[o+f],void 0===h){c[c.length]=t(i,r(a,o+1)),u[u.length]=t(g,r(e,o+f+1));break}o===a.length-1&&(v[v.length]=g)}return[v,c,u]}module.exports=function(t,n,a,h){for(var o=[],g=[],i=[],f=-1,v=-1,u=0,c=n.length;u<c;++u){var s=n[u],p=t[u],d=a[u],q=h[s.length];if(q)if(e(q,s,0))i[++f]=p;else{for(var y=l(p,s,q,d<0?-d:0,d>0?r(p,0,d):[],d<0?r(s,0,-d):[],d),b=0,k=y[0].length;b<k;++b)i[++f]=y[0][b];for(var j=0,m=y[1].length;j<m;++j)o[++v]=y[1][j],g[v]=y[2][j]}else o[++v]=s,g[v]=p}return i.length?[i,o,g]:null};
},{"falcor-path-utils":"GOy5","./../support/array-slice":"rEt7","./../support/array-concat":"T135"}],"gQb4":[function(require,module,exports) {
var e=require("falcor-path-utils"),r=e.toTree,t=e.toPaths,u=require("./../errors/InvalidSourceError");module.exports=function(e,n,l){if(0===e._count)return e.requestQueue.removeRequest(e),null;e.sent=!0,e.scheduled=!1;for(var o=e._pathMap,a=0,s=Object.keys(n).length;a<s;++a)for(var c=n[a],i=0,f=c.length;i<f;++i){var h=c[i],v=h.length;if(o[v]){var d=o[v];d[d.length]=h}else o[v]=[h]}for(var g=Object.keys(o),p=0,q=g.length;p<q;++p){var b=g[p];o[b]=r(o[b])}var _,m,y=e._collasped=t(o);try{m=e.requestQueue.model._source.get(y)}catch(e){return l(new u),null}return m.subscribe(function(e){_=e},function(e){l(e,_)},function(){l(null,_)})};
},{"falcor-path-utils":"GOy5","./../errors/InvalidSourceError":"sUqC"}],"CXC8":[function(require,module,exports) {
var n=null;exports.setVersion=function(e){n=e},exports.getVersion=function(){return n};
},{}],"BRk4":[function(require,module,exports) {
var e=require("./complement"),r=require("./flushGetRequest"),s=require("../support/incrementVersion"),t=require("../support/currentCacheVersion"),a=0,u=require("./RequestTypes").GetRequest,i=require("./../set/setJSONGraphs"),o=require("./../set/setPathValues"),h=require("./../types/error"),n=[],l=require("./../errors/InvalidSourceError"),c=function(e,r){this.sent=!1,this.scheduled=!1,this.requestQueue=r,this.id=++a,this.type=u,this._scheduler=e,this._pathMap={},this._optimizedPaths=[],this._requestedPaths=[],this._callbacks=[],this._count=0,this._disposable=null,this._collapsed=null,this._disposed=!1};function p(e,r){var s=!1;return function(){if(!s&&!e._disposed){s=!0,e._callbacks[r]=null,e._optimizedPaths[r]=[],e._requestedPaths[r]=[];var t=--e._count,a=e._disposable;0===t&&(a.unsubscribe?a.unsubscribe():a.dispose(),e.requestQueue.removeRequest(e))}}}function d(e){for(var r=[],s=-1,t=0,a=e.length;t<a;++t)for(var u=e[t],i=0,o=u.length;i<o;++i)r[++s]=u[i];return r}c.prototype={batch:function(e,a,u){var i=this,o=i._optimizedPaths,h=i._requestedPaths,n=i._callbacks,c=o.length;if(o[c]=a,h[c]=e,n[c]=u,++i._count,!i.scheduled){var d;i.scheduled=!0;var _=i._scheduler.schedule(function(){d=r(i,o,function(e,r){var a,u,o,c=i.requestQueue.model;if(i.requestQueue.removeRequest(i),i._disposed=!0,c._treatDataSourceErrorsAsJSONGraphErrors?e instanceof l:e)for(a=0,o=n.length;a<o;++a)(u=n[a])&&u(e);else if(i._count){var p=s.getCurrentVersion();t.setVersion(p);var d={hasInvalidatedResult:!1},_=c._useServerPaths&&r&&void 0===r.paths?new Error("Server responses must include a 'paths' field when Model._useServerPaths === true"):void 0;for(_||i._merge(h,e,r,d),a=0,o=n.length;a<o;++a)(u=n[a])&&u(_||e,r,d.hasInvalidatedResult);t.setVersion(null)}}),i._disposable=d});i._disposable=d||_}return p(i,c)},add:function(r,s,t,a){var u,i,o=e(r,s,t,this._pathMap);o?(i=o[2],u=o[1]):(i=r,u=s);var h=!1,n=!1;if(o&&o[0].length){h=!0;var l=this._callbacks.length;this._callbacks[l]=a,this._requestedPaths[l]=o[0],this._optimizedPaths[l]=[],++this._count,n=p(this,l)}return[h,i,u,n]},_merge:function(e,r,s,t){var a=this.requestQueue.model,u=a._root,l=u.errorSelector,c=u.comparator,p=a._path;a._path=n;var _=a._useServerPaths?s.paths:d(e);if(r&&a._treatDataSourceErrorsAsJSONGraphErrors){var v=r;v instanceof Error&&(v={message:v.message}),v.$type||(v={$type:h,value:v});var f=_.map(function(e){return{path:e,value:v}});o(a,f,null,l,c,t)}else i(a,[{paths:_,jsonGraph:s.jsonGraph}],null,l,c,t);a._path=p}},module.exports=c;
},{"./complement":"qxDZ","./flushGetRequest":"gQb4","../support/incrementVersion":"/mPE","../support/currentCacheVersion":"CXC8","./RequestTypes":"Siym","./../set/setJSONGraphs":"T5SZ","./../set/setPathValues":"t3P2","./../types/error":"wbKo","./../errors/InvalidSourceError":"sUqC"}],"PoQp":[function(require,module,exports) {
var e=require("./RequestTypes"),t=require("./sendSetRequest"),s=require("./GetRequestV2"),r=require("falcor-path-utils");function i(e,t){this.model=e,this.scheduler=t,this.requests=this._requests=[]}i.prototype={setScheduler:function(e){this.scheduler=e},set:function(e,s){return e.paths=r.collapse(e.paths),t(e,this.model,s)},get:function(t,r,i,u){var h,n,l,o=[],f=0,a=this._requests,c=r,q=t,d=!1;for(h=0,n=a.length;h<n;++h)if((l=a[h]).type===e.GetRequest){if(l.sent){var p=l.add(q,c,i,v);p[0]&&(q=p[1],c=p[2],o[o.length]=p[3],++f)}else l.batch(q,c,v),c=[],q=[],++f;if(!c.length)break}if(c.length){l=new s(this.scheduler,this),a[a.length]=l,++f;var g=l.batch(q,c,v);o[o.length]=g}function v(e,t,s){d||0===--f&&u(e,t,s)}return function(){if(!d&&0!==f){d=!0;for(var e=o.length,t=0;t<e;++t)o[t]()}}},removeRequest:function(e){for(var t=this._requests,s=t.length;--s>=0;)if(t[s].id===e.id){t.splice(s,1);break}}},module.exports=i;
},{"./RequestTypes":"Siym","./sendSetRequest":"a8C1","./GetRequestV2":"BRk4","falcor-path-utils":"GOy5"}],"Za7E":[function(require,module,exports) {
module.exports=function(){};
},{}],"4dNZ":[function(require,module,exports) {
var o=require("./../support/noop");function t(t,n,e){this._observer=t&&"object"==typeof t?{onNext:"function"==typeof t.onNext?function(o){t.onNext(o)}:o,onError:"function"==typeof t.onError?function(o){t.onError(o)}:o,onCompleted:"function"==typeof t.onCompleted?function(){t.onCompleted()}:o}:{onNext:"function"==typeof t?t:o,onError:"function"==typeof n?n:o,onCompleted:"function"==typeof e?e:o}}t.prototype={onNext:function(o){this._closed||this._observer.onNext(o)},onError:function(o){this._closed||(this._closed=!0,this._observer.onError(o))},onCompleted:function(){this._closed||(this._closed=!0,this._observer.onCompleted())}},module.exports=t;
},{"./../support/noop":"Za7E"}],"Mqmi":[function(require,module,exports) {
"use strict";function e(e){var o,r=e.Symbol;return"function"==typeof r?r.observable?o=r.observable:(o=r("observable"),r.observable=o):o="@@observable",o}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"FvBc":[function(require,module,exports) {
var global = arguments[3];
var e=arguments[3];Object.defineProperty(exports,"__esModule",{value:!0});var d,n=require("./ponyfill.js"),u=o(n);function o(e){return e&&e.__esModule?e:{default:e}}d="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof module?module:Function("return this")();var t=(0,u.default)(d);exports.default=t;
},{"./ponyfill.js":"Mqmi"}],"VPJx":[function(require,module,exports) {
function e(e){this.esObserver=e}function t(e){this.subscription=e}function s(s){return{subscribe:function(r){return new t(s.subscribe(new e(r)))}}}e.prototype={onNext:function(e){"function"==typeof this.esObserver.next&&this.esObserver.next(e)},onError:function(e){"function"==typeof this.esObserver.error&&this.esObserver.error(e)},onCompleted:function(){"function"==typeof this.esObserver.complete&&this.esObserver.complete()}},t.prototype.unsubscribe=function(){this.subscription.dispose()},module.exports=s;
},{}],"TLYW":[function(require,module,exports) {
var e=require("./ModelResponseObserver"),o=require("symbol-observable").default,t=require("../toEsObservable");function r(e){this._subscribe=e}r.prototype[o]=function(){return t(this)},r.prototype._toJSONG=function(){return this},r.prototype.progressively=function(){return this},r.prototype.subscribe=r.prototype.forEach=function(o,t,r){var s=new e(o,t,r),n=this._subscribe(s);switch(typeof n){case"function":return{dispose:function(){s._closed||(s._closed=!0,n())}};case"object":return{dispose:function(){s._closed||(s._closed=!0,null!==n&&n.dispose())}};default:return{dispose:function(){s._closed=!0}}}},r.prototype.then=function(e,o){var t=this;return t._promise||(t._promise=new Promise(function(e,o){var r=!1,s=[];t.subscribe(function(e){s[s.length]=e},function(e){r=!0,o(e)},function(){var o=s;s.length<=1&&(o=s[0]),!1===r&&e(o)})})),t._promise.then(e,o)},module.exports=r;
},{"./ModelResponseObserver":"4dNZ","symbol-observable":"FvBc","../toEsObservable":"VPJx"}],"L185":[function(require,module,exports) {
var o={token:"token",dotSeparator:".",commaSeparator:",",openingBracket:"[",closingBracket:"]",openingBrace:"{",closingBrace:"}",escape:"\\",space:" ",colon:":",quote:"quote",unknown:"unknown"};module.exports=o;
},{}],"RShN":[function(require,module,exports) {
var e=require("./../TokenTypes"),t=".",n=",",r="[",i="]",a="{",s="}",o=":",k="\\",c='"',h="'",d=" ",x="\\'\"[]., ",u="\\{}'\"[]., :",_=module.exports=function(e,t){this._string=e,this._idx=-1,this._extended=t,this.parseString=""};function b(e,t,n){return{token:e,done:n,type:t}}function p(_,p,g){var f,l=!1,T="",v=g?u:x;do{if(f=p+1>=_.length)break;var N=_[p+1];if(void 0===N||-1!==v.indexOf(N)){if(T.length)break;var m;switch(++p,N){case t:m=e.dotSeparator;break;case n:m=e.commaSeparator;break;case r:m=e.openingBracket;break;case i:m=e.closingBracket;break;case a:m=e.openingBrace;break;case s:m=e.closingBrace;break;case d:m=e.space;break;case c:case h:m=e.quote;break;case k:m=e.escape;break;case o:m=e.colon;break;default:m=e.unknown}l=b(N,m,!1);break}T+=N,++p}while(!f);return!l&&T.length&&(l=b(T,e.token,!1)),l||(l={done:!0}),{token:l,idx:p}}_.prototype={next:function(){var e=this._nextToken?this._nextToken:p(this._string,this._idx,this._extended);return this._idx=e.idx,this._nextToken=!1,this.parseString+=e.token.token,e.token},peek:function(){var e=this._nextToken?this._nextToken:p(this._string,this._idx,this._extended);return this._nextToken=e,e.token}},_.toNumber=function(e){return isNaN(+e)?NaN:+e};
},{"./../TokenTypes":"L185"}],"ZhvR":[function(require,module,exports) {
module.exports={indexer:{nested:"Indexers cannot be nested.",needQuotes:"unquoted indexers must be numeric.",empty:"cannot have empty indexers.",leadingDot:"Indexers cannot have leading dots.",leadingComma:"Indexers cannot have leading comma.",requiresComma:"Indexers require commas between indexer args.",routedTokens:"Only one token can be used per indexer when specifying routed tokens."},range:{precedingNaN:"ranges must be preceded by numbers.",suceedingNaN:"ranges must be suceeded by numbers."},routed:{invalid:"Invalid routed token.  only integers|ranges|keys are supported."},quote:{empty:"cannot have empty quoted keys.",illegalEscape:"Invalid escape character.  Only quotes are escapable."},unexpectedToken:"Unexpected token.",invalidIdentifier:"Invalid Identifier.",invalidPath:"Please provide a valid path.",throwError:function(e,n,t){if(t)throw e+" -- "+n.parseString+" with next token: "+t;throw e+" -- "+n.parseString}};
},{}],"TaSD":[function(require,module,exports) {
var e=require("./../tokenizer"),r=require("./../TokenTypes"),o=require("./../exceptions");module.exports=function(t,n,a,i){var d,k=t.peek(),u=1,N=!1,p=!0,s=a.indexer.length-1,c=e.toNumber(a.indexer[s]);for(isNaN(c)&&o.throwError(o.range.precedingNaN,t);!N&&!k.done;){switch(k.type){case r.dotSeparator:3===u&&o.throwError(o.unexpectedToken,t),3===++u&&(p=!1);break;case r.token:d=e.toNumber(t.next().token),isNaN(d)&&o.throwError(o.range.suceedingNaN,t),N=!0;break;default:N=!0}if(N)break;t.next(),k=t.peek()}a.indexer[s]={from:c,to:p?d:d-1}};
},{"./../tokenizer":"RShN","./../TokenTypes":"L185","./../exceptions":"ZhvR"}],"uTgx":[function(require,module,exports) {
var e=require("./../TokenTypes"),r=require("./../exceptions"),a=r.quote;module.exports=function(o,t,n,c){for(var s=o.next(),k="",i=t.token,p=!1,l=!1;!s.done;){switch(s.type){case e.token:case e.space:case e.dotSeparator:case e.commaSeparator:case e.openingBracket:case e.closingBracket:case e.openingBrace:case e.closingBrace:p&&r.throwError(a.illegalEscape,o),k+=s.token;break;case e.quote:p?(k+=s.token,p=!1):s.token!==i?k+=s.token:l=!0;break;case e.escape:p=!0;break;default:r.throwError(r.unexpectedToken,o)}if(l)break;s=o.next()}0===k.length&&r.throwError(a.empty,o),n.indexer[n.indexer.length]=k};
},{"./../TokenTypes":"L185","./../exceptions":"ZhvR"}],"Yhoa":[function(require,module,exports) {
module.exports={integers:"integers",ranges:"ranges",keys:"keys"};
},{}],"UJjp":[function(require,module,exports) {
var e=require("./../TokenTypes"),r=require("./../RoutedTokens"),n=require("./../exceptions"),t=n.routed;module.exports=function(o,i,a,s){var d=o.next(),c=!1,l="";switch(d.token){case r.integers:case r.ranges:case r.keys:break;default:n.throwError(t.invalid,o)}var k=o.next();if(k.type===e.colon&&(c=!0,(k=o.next()).type!==e.token&&n.throwError(t.invalid,o),l=k.token,k=o.next()),k.type===e.closingBrace){var u={type:d.token,named:c,name:l};a.indexer[a.indexer.length]=u}else n.throwError(t.invalid,o)};
},{"./../TokenTypes":"L185","./../RoutedTokens":"Yhoa","./../exceptions":"ZhvR"}],"6myZ":[function(require,module,exports) {
var e=require("./../TokenTypes"),r=require("./../exceptions"),n=r.indexer,o=require("./range"),t=require("./quote"),a=require("./routed");module.exports=function(i,d,s,c){var x=i.next(),k=!1,h=1,u=!1;for(s.indexer=[];!x.done;){switch(x.type){case e.token:case e.quote:s.indexer.length===h&&r.throwError(n.requiresComma,i)}switch(x.type){case e.openingBrace:u=!0,a(i,x,s,c);break;case e.token:var g=+x.token;isNaN(g)&&r.throwError(n.needQuotes,i),s.indexer[s.indexer.length]=g;break;case e.dotSeparator:s.indexer.length||r.throwError(n.leadingDot,i),o(i,x,s,c);break;case e.space:break;case e.closingBracket:k=!0;break;case e.quote:t(i,x,s,c);break;case e.openingBracket:r.throwError(n.nested,i);break;case e.commaSeparator:++h;break;default:r.throwError(r.unexpectedToken,i)}if(k)break;x=i.next()}0===s.indexer.length&&r.throwError(n.empty,i),s.indexer.length>1&&u&&r.throwError(n.routedTokens,i),1===s.indexer.length&&(s.indexer=s.indexer[0]),c[c.length]=s.indexer,s.indexer=void 0};
},{"./../TokenTypes":"L185","./../exceptions":"ZhvR","./range":"TaSD","./quote":"uTgx","./routed":"UJjp"}],"nX2Z":[function(require,module,exports) {
var e=require("./../TokenTypes"),r=require("./../exceptions"),t=require("./indexer");module.exports=function(n){for(var o=n.next(),a={},i=[];!o.done;){switch(o.type){case e.token:var c=+o.token[0];isNaN(c)||r.throwError(r.invalidIdentifier,n),i[i.length]=o.token;break;case e.dotSeparator:0===i.length&&r.throwError(r.unexpectedToken,n);break;case e.space:break;case e.openingBracket:t(n,o,a,i);break;default:r.throwError(r.unexpectedToken,n)}o=n.next()}return 0===i.length&&r.throwError(r.invalidPath,n),i};
},{"./../TokenTypes":"L185","./../exceptions":"ZhvR","./indexer":"6myZ"}],"Dqi5":[function(require,module,exports) {
var e=require("./tokenizer"),r=require("./parse-tree/head"),t=require("./RoutedTokens"),n=function(t,n){return r(new e(t,n))};module.exports=n,n.fromPathsOrPathValues=function(e,r){if(!e)return[];for(var t=[],o=0,u=e.length;o<u;o++)"string"==typeof e[o]?t[o]=n(e[o],r):"string"==typeof e[o].path?t[o]={path:n(e[o].path,r),value:e[o].value}:t[o]=e[o];return t},n.fromPath=function(e,r){return e?"string"==typeof e?n(e,r):e:[]},n.RoutedTokens=t;
},{"./tokenizer":"RShN","./parse-tree/head":"nX2Z","./RoutedTokens":"Yhoa"}],"/wx3":[function(require,module,exports) {
var r=require("./../response/ModelResponse"),t=require("./../errors/InvalidSourceError"),o=require("falcor-path-syntax");function e(r,t,e,n,i){this.callPath=o.fromPath(t),this.args=e,i&&(this.paths=i.map(o.fromPath)),n&&(this.suffix=n.map(o.fromPath)),this.model=r}e.prototype=Object.create(r.prototype),e.prototype._subscribe=function(r){var o=this.callPath,e=this.args,n=this.suffix,i=this.paths,a=this.model,s=a._clone({_path:[]}),c=a._path.concat(o);if(a._source){var u,h;try{h=a._source.call(c,e,n,i)}catch(o){return void r.onError(new t(o))}return h.subscribe(function(r){u=r},function(t){r.onError(t)},function(){var t=u.invalidated;t&&t.length&&s.invalidate.apply(s,t),s.withoutDataSource().set(u).subscribe(function(t){r.onNext(t)},function(t){r.onError(t)},function(){r.onCompleted()})})}r.onError(new Error("function does not exist"))},module.exports=e;
},{"./../response/ModelResponse":"TLYW","./../errors/InvalidSourceError":"sUqC","falcor-path-syntax":"Dqi5"}],"crkB":[function(require,module,exports) {
var r=Array.isArray,t=require("./../support/isObject");module.exports=function(e){return t(e)&&(r(e.path)||"string"==typeof e.path)};
},{"./../support/isObject":"VKa5"}],"sC7O":[function(require,module,exports) {
var r=require("./../support/isObject");module.exports=function(e){return r(e)&&"json"in e};
},{"./../support/isObject":"VKa5"}],"jr6Y":[function(require,module,exports) {
var e=Array.isArray,t=require("./ModelResponse"),r=require("./../support/isPathValue"),o=require("./../support/isJSONEnvelope"),s={dispose:function(){}};function p(t,s){this._model=t;for(var p,i,u=[],n=-1,a=s.length;++n<a;){var h,l=s[n];if(e(l))h="PathValues";else if(r(l))h="PathValues";else{if(!o(l))throw new Error("Invalid Input");h="PathMaps"}i!==h&&(i=h,p={inputType:h,arguments:[]},u.push(p)),p.arguments.push(l)}this._groups=u}p.prototype=Object.create(t.prototype),p.prototype.progressively=function(){return this},p.prototype._toJSONG=function(){return this},p.prototype._subscribe=function(e){var t=this._model;return this._groups.forEach(function(e){var r=e.inputType,o=e.arguments;(0,t["_invalidate"+r])(t,o)}),e.onCompleted(),s},module.exports=p;
},{"./ModelResponse":"TLYW","./../support/isPathValue":"crkB","./../support/isJSONEnvelope":"sC7O"}],"WNxo":[function(require,module,exports) {
var global = arguments[3];
var e=arguments[3];function t(e){r.length||(n(),a=!0),r[r.length]=e}module.exports=t;var n,r=[],a=!1,o=0,u=1024;function l(){for(;o<r.length;){var e=o;if(o+=1,r[e].call(),o>u){for(var t=0,n=r.length-o;t<n;t++)r[t]=r[t+o];r.length-=o,o=0}}r.length=0,o=0,a=!1}var i=void 0!==e?e:self,c=i.MutationObserver||i.WebKitMutationObserver;function f(e){var t=1,n=new c(e),r=document.createTextNode("");return n.observe(r,{characterData:!0}),function(){t=-t,r.data=t}}function v(e){return function(){var t=setTimeout(r,0),n=setInterval(r,50);function r(){clearTimeout(t),clearInterval(n),e()}}}n="function"==typeof c?f(l):v(l),t.requestFlush=n,t.makeRequestCallFromTimer=v;
},{}],"2/2H":[function(require,module,exports) {
"use strict";var t=require("./browser-raw"),r=[],e=[],n=t.makeRequestCallFromTimer(l);function l(){if(e.length)throw e.shift()}function o(e){var n;(n=r.length?r.pop():new s).task=e,t(n)}function s(){this.task=null}module.exports=o,s.prototype.call=function(){try{this.task.call()}catch(t){o.onerror?o.onerror(t):(e.push(t),n())}finally{this.task=null,r[r.length]=this}};
},{"./browser-raw":"WNxo"}],"4k6S":[function(require,module,exports) {
var t=require("falcor-asap"),e={dispose:function(){}};function o(){}o.prototype.schedule=function(o){return t(o),e},o.prototype.scheduleWithState=function(o,n){var r=this;return t(function(){n(r,o)}),e},module.exports=o;
},{"falcor-asap":"2/2H"}],"maeE":[function(require,module,exports) {
function t(t){this.delay=t}var e=function(t){this.id=t,this.disposed=!1};t.prototype.schedule=function(t){var i=setTimeout(t,this.delay);return new e(i)},t.prototype.scheduleWithState=function(t,i){var s=this,o=setTimeout(function(){i(s,t)},this.delay);return new e(o)},e.prototype.dispose=function(){this.disposed||(clearTimeout(this.id),this.disposed=!0)},module.exports=t;
},{}],"dDA6":[function(require,module,exports) {
module.exports=function(r){if(!r)return r;for(var e=-1,n=r.length,t=[];++e<n;)t[e]=r[e];return t};
},{}],"rDUq":[function(require,module,exports) {
var e=require("./../support/removeNode"),r=require("./../support/updateNodeAncestors");module.exports=function(o,p,t,$,i,u){var a=t,n=i;"number"!=typeof n&&(n=.75);var v,_,d,s="number"==typeof u,f=$*n;for(_=p.pop();_;)a-=d=_.$size||0,!0===s?r(_,d,o,u):(v=_.$_parent)&&e(_,v,_.$_key,o),_=p.pop();if(a>=$){var l=o.$_tail;for(_=l;a>=f&&_;)l=l.$_prev,a-=d=_.$size||0,!0===s&&r(_,d,o,u),_=l;o.$_tail=o.$_prev=_,null==_?o.$_head=o.$_next=void 0:_.$_next=void 0}};
},{"./../support/removeNode":"cJVv","./../support/updateNodeAncestors":"vcMd"}],"OO1h":[function(require,module,exports) {
var r=Array.isArray,s=require("./../support/isObject");module.exports=function(e){return s(e)&&r(e.paths)&&(s(e.jsonGraph)||s(e.jsong)||s(e.json)||s(e.values)||s(e.value))};
},{"./../support/isObject":"VKa5"}],"U40X":[function(require,module,exports) {
var e=require("falcor-path-utils"),r=e.toTree,n=e.toPaths,i=require("./../support/createHardlink"),t=require("./../internal/reservedPrefix"),u=require("./../types/ref"),o=require("./../get/getBoundValue"),a=Array.isArray,s=require("./../support/hasOwn"),p=require("./../support/isObject"),l=require("./../support/isExpired"),v=require("./../support/isFunction"),h=require("./../support/isPrimitive"),d=require("./../support/expireNode"),f=require("./../support/incrementVersion"),c=require("./../support/mergeValueOrInsertBranch"),x=require("./../errors/NullInPathError");function g(e,r,n,i,t,u,o,a,s,l,v,h,d,f){var c=y(e);if(c&&c.length)for(var x=0,q=c.length,_=s.index;;){var O=c[x],b=e[O],m=p(b)&&!b.$type;a.depth=r;var w=$(n,i,t,O,b,m,!1,a,s,l,v,h,d,f);a[r]=O,a.index=r,s[s.index++]=O;var P=w[0],j=w[1];if(P&&(m?g(b,r+1,n,j,P,u,o,a,s,l,v,h,d,f):(u.push(a.slice(0,a.index+1)),o.push(s.slice(0,s.index)))),++x>=q)break;s.index=_}}function q(e,r,n,t,u,o,a,s,p,v){var f=n.value;if(u.splice(0,u.length),u.push.apply(u,f),l(n))return u.index=f.length,d(n,a,s),[void 0,r];var c=n,x=r;if(null!=(n=n.$_context))x=n.$_parent||r,u.index=f.length;else{var g=0,q=f.length-1;u.index=g,x=n=r;do{var y=$(r,x,n,f[g],e,g<q,!0,t,u,o,a,s,p,v);if(n=y[0],h(n))return u.index=g,y;x=y[1]}while(g++<q);u.index=g,c.$_context!==n&&i(c,n)}return[n,x]}function $(e,r,n,i,t,o,a,s,p,l,v,d,f,g){for(var $=n.$type;$===u;){var y=q(t,e,n,s,p,l,v,d,f,g);if(n=y[0],h(n))return y;r=y[1],$=n&&n.$type}if(void 0!==$)return[n,r];if(null==i){if(o)throw new x;n&&(i=n.$_key)}else n=(r=n)[i];return[n=c(r,n,i,t,o,a,s,p,l,v,d,f,g),r]}function y(e){if(p(e)&&!e.$type){var r=[],n=0;for(var i in a(e)&&(r[n++]="length"),e)i[0]!==t&&s(e,i)&&(r[n++]=i);return r}}module.exports=function(e,i,t,u,a){for(var s=e._root,p=s,l=s.expired,h=f(),d=e._path,c=s.cache,x=d.length?o(e,d).value:c,q=x.$_parent||c,$=c.$_version,y=[],_=[],O=[],b=d.length,m=-1,w=i.length;++m<w;){var P=i[m],j=d.slice(0);j.index=b,g(P.json,0,c,q,x,_,O,y,j,h,l,p,a,u)}if(s.hasObservers()){var k=i.reduce(function(e,r){return e.concat(n(r.json))},[]),V=r(k);s.onObserve(k,V)}var A=c.$_version,B=s.onChange;return v(B)&&$!==A&&B(),[_,O]};
},{"falcor-path-utils":"GOy5","./../support/createHardlink":"RaVg","./../internal/reservedPrefix":"cTsu","./../types/ref":"wLEx","./../get/getBoundValue":"170P","./../support/hasOwn":"xzHV","./../support/isObject":"VKa5","./../support/isExpired":"tZba","./../support/isFunction":"PdPa","./../support/isPrimitive":"I3J4","./../support/expireNode":"uEXV","./../support/incrementVersion":"/mPE","./../support/mergeValueOrInsertBranch":"JnWd","./../errors/NullInPathError":"1vC+"}],"A6VP":[function(require,module,exports) {
var r=require("falcor-path-syntax");function t(r,t,n){var e=Object.create(null);if(null!=n){for(var a in n)e[a]=n[a];return e.$type=r,e.value=t,e}return{$type:r,value:t}}module.exports={ref:function(n,e){return t("ref",r.fromPath(n),e)},atom:function(r,n){return t("atom",r,n)},undefined:function(){return t("atom")},error:function(r,n){return t("error",r,n)},pathValue:function(t,n){return{path:r.fromPath(t),value:n}},pathInvalidation:function(t){return{path:r.fromPath(t),invalidated:!0}}};
},{"falcor-path-syntax":"Dqi5"}],"Hhzp":[function(require,module,exports) {
var r=Array.isArray,e=require("./../support/isPathValue"),t=require("./../support/isJSONGraphEnvelope"),o=require("./../support/isJSONEnvelope"),a=require("falcor-path-syntax");module.exports=function(p,n,u){for(var i=0,s=p.length;i<s;++i){var h=p[i],f=!1;if(r(h)&&n.path?f=!0:"string"==typeof h&&n.pathSyntax?f=!0:e(h)&&n.pathValue?(h.path=a.fromPath(h.path),f=!0):t(h)&&n.jsonGraph?f=!0:o(h)&&n.json?f=!0:"function"==typeof h&&i+1===s&&n.selector&&(f=!0),!f)return new Error("Unrecognized argument "+typeof h+" ["+String(h)+"] to Model#"+u)}return!0};
},{"./../support/isPathValue":"crkB","./../support/isJSONGraphEnvelope":"OO1h","./../support/isJSONEnvelope":"sC7O","falcor-path-syntax":"Dqi5"}],"dPRf":[function(require,module,exports) {
var r=require("./../internal/privatePrefix");module.exports=function(e){return"$size"===e||e.substr(0,2)===r};
},{"./../internal/privatePrefix":"IrRR"}],"Dntp":[function(require,module,exports) {
var e=require("./../support/isInternalKey");function r(r){var t,n,o,u={},a=Object.keys(r);for(n=0,o=a.length;n<o;n++)t=a[n],e(t)||(u[t]=r[t]);return u}function t(n,o,u){Object.keys(n).filter(function(r){return!e(r)&&void 0!==n[r]}).forEach(function(e){var u=n[e],a=o[e];if(a||(a=o[e]={}),u.$type){var i,f=u.value&&"object"==typeof u.value,v=!u.$_modelCreated;return i=f||v?r(u):u.value,void(o[e]=i)}t(u,a,e)})}module.exports=function(e){var r={};return t(e,r),r};
},{"./../support/isInternalKey":"dPRf"}],"VNuN":[function(require,module,exports) {
module.exports=function(e,o){for(var r=e._root.cache,t=-1,n=o.length;++t<n&&r&&!r.$type;)r=r[o[t]];return r};
},{}],"M66y":[function(require,module,exports) {
var r=require("./applyErrorPrototype");function o(){var r=new Error("It is not legal to use the JSON Graph format from a bound Model. JSON Graph format can only be used from a root model.");return r.name="BoundJSONGraphModelError",Object.setPrototypeOf&&Object.setPrototypeOf(r,Object.getPrototypeOf(this)),Error.captureStackTrace&&Error.captureStackTrace(r,o),r}r(o),module.exports=o;
},{"./applyErrorPrototype":"hlai"}],"h3SD":[function(require,module,exports) {
var r=require("./../get/getCachePosition"),e=require("./../errors/InvalidModelError"),t=require("./../errors/BoundJSONGraphModelError");function n(r,e){if(r!==e&&null!==r&&"object"==typeof r&&!r.$type&&null!==e&&"object"==typeof e&&!e.$type)for(var t in e)if("$__path"!==t){var o=r[t];void 0===o?r[t]=e[t]:n(o,e[t])}}function o(r){return r?{jsonGraph:{},paths:[]}:{json:{}}}module.exports=function(i,a){return function(u,l,c){var f,h,p,s,d,g=a?c:[{}],v=g[0],_={values:g,optimizedPaths:[]},y=u._root.cache,j=u._path,E=y,$=[],m=[];if(j.length){if(a)return{criticalError:new t};if(h=(f=u._getOptimizedBoundPath()).length,(E=r(u,f))&&E.$type)return{criticalError:new e(j,f)};d=u._referenceContainer}else f=[],h=0;for(p=0,s=l.length;p<s;p++)i(u,y,E,l[p],0,v,_,m,$,f,h,a,!1,d);return n(v,l.length?c[0]:o(a)),_}};
},{"./../get/getCachePosition":"VNuN","./../errors/InvalidModelError":"fn83","./../errors/BoundJSONGraphModelError":"M66y"}],"fKbb":[function(require,module,exports) {
var r=require("./../lru/promote"),e=require("./../get/util/clone");module.exports=function(o,u,l,t,s){var a=u.value;s.errors||(s.errors=[]),o._boxed&&(a=e(u)),s.errors.push({path:t.slice(0,l),value:a}),r(o._root,u)};
},{"./../lru/promote":"DAC8","./../get/util/clone":"wIJ9"}],"Mzel":[function(require,module,exports) {
function t(t,r){var n,o,e,f=[];for(o=0,e=r||0,n=t.length;e<n;o++,e++)f[o]=t[e];return f}function r(t,r){var n,o,e,f=[];for(n=0,o=t.length;n<o;n++)f[n]=t[n];for(e=0,o=r.length;e<o;e++)f[n++]=r[e];return f}module.exports={fastCat:r,fastCopy:t};
},{}],"Sqce":[function(require,module,exports) {
var e=require("./util/support"),t=e.fastCopy,i=e.fastCat,r=require("./../support/array-slice");function s(e,t,s,n,a,f,u){u.requestedMissingPaths[u.requestedMissingPaths.length]=i(r(n,0,s),t),u.optimizedMissingPaths[u.optimizedMissingPaths.length]=i(r(a,0,f),t),u.depthDifferences[u.depthDifferences.length]=s-f}function n(e){if(null===e||"object"!=typeof e)return!1;var t=Array.isArray(e);if(t&&e.length)return!1;if(t)return!0;var i=e.from,r=e.to;return!(void 0===i||i<=r)}module.exports=function(e,i,r,a,f,u,o){var h;if(a.requestedMissingPaths||(a.requestedMissingPaths=[],a.optimizedMissingPaths=[],a.depthDifferences=[]),r<i.length){for(var g=r;g<i.length;++g)if(n(i[g]))return;h=t(i,r)}else h=[];s(e,h,r,f,u,o,a)};
},{"./util/support":"Mzel","./../support/array-slice":"rEt7"}],"q27V":[function(require,module,exports) {
module.exports=function(e){return e._materialized&&!e._source};
},{}],"kc/2":[function(require,module,exports) {
var r=require("./util/isExpired"),e=require("./../types/error"),i=require("./onError"),o=require("./onValue"),u=require("./onMissing"),t=require("./util/isMaterialzed"),s=require("./../support/expireNode"),n=require("../support/currentCacheVersion");module.exports=function(a,l,p,d,q,v,x,_,V,$,c,E){var f=l&&l.$type;if(!l||!f){var g=t(a);return!g&&c||o(a,l,q,d,v,x,_,V,$,c),void(g||u(a,p,d,v,_,V,$))}!r(l)||l.$_version===n.getVersion()&&0===l.$expires?f===e?(E&&(_[d]=null,d+=1),c||a._treatErrorsAsValues?o(a,l,q,d,v,x,_,V,$,c):(o(a,void 0,q,d,v,x,_,V,$,c),i(a,l,d,_,v))):(E&&(_[d]=null,d+=1),o(a,l,q,d,v,x,_,V,$,c)):(l.$_invalidated||s(l,a._root.expired,a._root),u(a,p,d,v,_,V,$))};
},{"./util/isExpired":"5v73","./../types/error":"wbKo","./onError":"fKbb","./onValue":"Mdrc","./onMissing":"Sqce","./util/isMaterialzed":"q27V","./../support/expireNode":"uEXV","../support/currentCacheVersion":"CXC8"}],"hPJr":[function(require,module,exports) {
var e=require("./followReference"),r=require("./onValueType"),l=require("./onValue"),t=require("./util/isExpired"),o=require("falcor-path-utils").iterateKeySet,a=require("./../types/ref"),u=require("./../errors/NullInPathError"),i=require("./../lru/promote");module.exports=function n(f,h,_,p,s,v,$,q,c,y,d,w,P,b){var g=P,m=y,x=b;if(!_||_&&_.$type||s===p.length)r(f,_,p,s,v,$,q,c,m,d,w,g);else{var E,R=p[s],V="object"==typeof R,j=s+1,C=!1,F=R,I=f._allowFromWhenceYouCame;V&&(F=o(R,C={}));var K,N=d+1;do{var S;if(g=!1,null===F){if(s<p.length)throw new u;S=_}else S=_[F],m[d]=F,c[s]=F;var T=m,W=N;if(S){var Y,k=S.$type,z=k&&S.value||S;if(j<p.length&&k&&k===a&&!t(S)){i(f._root,S),w&&l(f,S,v,j,$,null,null,m,W,w);var A=e(f,h,h,S,z,v,w);for(g=!0,S=A[0],K=A[1],x=A[2],T=[],W=K.length,E=0;E<W;++E)T[E]=K[E]}if(S)Y=x&&I?{$__path:S.$_absolutePath,$__refPath:x.value,$__toReference:x.$_absolutePath}:{$__path:S.$_absolutePath},q[s]=Y}n(f,h,S,p,j,v,$,q,c,T,W,w,g,x),C&&!C.done&&(F=o(R,C))}while(C&&!C.done)}};
},{"./followReference":"MC/A","./onValueType":"kc/2","./onValue":"Mdrc","./util/isExpired":"5v73","falcor-path-utils":"GOy5","./../types/ref":"wLEx","./../errors/NullInPathError":"1vC+","./../lru/promote":"DAC8"}],"FSuO":[function(require,module,exports) {
var e=require("./get"),t=require("./walkPath"),a=e(t,!1),r=e(t,!0);module.exports={getValueSync:require("./../get/getValueSync"),getBoundValue:require("./../get/getBoundValue"),getWithPathsAsPathMap:a,getWithPathsAsJSONGraph:r};
},{"./get":"h3SD","./walkPath":"hPJr","./../get/getValueSync":"lnLA","./../get/getBoundValue":"170P"}],"0vuS":[function(require,module,exports) {
module.exports={path:!0,pathSyntax:!0};
},{}],"6+ni":[function(require,module,exports) {
var r=require("./../../get"),e=r.getWithPathsAsJSONGraph,t=r.getWithPathsAsPathMap;module.exports=function(r,s,o,a,h,i,l){var n=h?e(r,s,i):t(r,s,i),u=n.values&&n.values[0],g=!n.requestedMissingPaths||!n.requestedMissingPaths.length||!r._source;if(n.errors)for(var c=n.errors,v=l.length,d=0,P=c.length;d<P;++d,++v)l[v]=c[d];if(a||(a&&n.hasValues||!a)&&g&&void 0!==u)try{o.onNext(u)}catch(r){throw r}return n.criticalError?(o.onError(n.criticalError),null):g?(l.length?o.onError(l):o.onCompleted(),null):n};
},{"./../../get":"FSuO"}],"9G7F":[function(require,module,exports) {
var e=require("./applyErrorPrototype");function r(e){var t=new Error("The allowed number of retries have been exceeded.");return t.name="MaxRetryExceededError",t.missingOptimizedPaths=e||[],Object.setPrototypeOf&&Object.setPrototypeOf(t,Object.getPrototypeOf(this)),Error.captureStackTrace&&Error.captureStackTrace(t,r),t}e(r),r.is=function(e){return e&&"MaxRetryExceededError"===e.name},module.exports=r;
},{"./applyErrorPrototype":"hlai"}],"SoPT":[function(require,module,exports) {
var s=function(s){this.disposed=!1,this.currentDisposable=s};s.prototype={dispose:function(){if(!this.disposed&&this.currentDisposable){this.disposed=!0;var s=this.currentDisposable;s.dispose?s.dispose():s()}}},module.exports=s;
},{}],"g/jf":[function(require,module,exports) {
var e=require("./checkCacheAndReport"),r=require("./../../errors/MaxRetryExceededError"),s=require("./../../get/util/support").fastCat,i=require("./../../lru/collect"),t=require("./../../support/getSize"),a=require("./../AssignableDisposable"),o=require("../../errors/InvalidSourceError");module.exports=function n(u,l,c,p,h,v){if(v>l._maxRetries)return p.onError(new r(c.optimizedMissingPaths)),{dispose:function(){}};var d=l._request,f=c.requestedMissingPaths,g=c.optimizedMissingPaths,q=c.depthDifferences,_=new a,x=[],E=l._path,m=E.length;if(E.length)for(var S=0,D=f.length;S<D;++S)x[S]=s(E,f[S]),q[S]+=m;else x=f;var P=d.get(x,g,q,function(r,s,a){if(l._treatDataSourceErrorsAsJSONGraphErrors?r instanceof o:r)return c.hasValues&&p.onNext(c.values&&c.values[0]),void p.onError(r);var d,g;a?(d=u.currentRemainingPaths,g=[{}]):(d=f,g=c.values);var q=e(l,d,p,u.isProgressive,u.isJSONGraph,g,h);if(q)_.currentDisposable=n(u,l,q,p,h,v+1);else{var x=l._root,E=x.cache,m=E.$_version;i(x,x.expired,t(E),l._maxSize,l._collectRatio,m)}});return _.currentDisposable=P,_};
},{"./checkCacheAndReport":"6+ni","./../../errors/MaxRetryExceededError":"9G7F","./../../get/util/support":"Mzel","./../../lru/collect":"rDUq","./../../support/getSize":"LNYZ","./../AssignableDisposable":"SoPT","../../errors/InvalidSourceError":"sUqC"}],"Lw2z":[function(require,module,exports) {
var e=require("./../ModelResponse"),t=require("./checkCacheAndReport"),r=require("./getRequestCycle"),i={dispose:function(){}},s=require("./../../lru/collect"),o=require("./../../support/getSize"),n=module.exports=function(e,t,r,i,s){this.model=e,this.currentRemainingPaths=t,this.isJSONGraph=r||!1,this.isProgressive=i||!1,this.forceCollect=s||!1};n.prototype=Object.create(e.prototype),n.prototype._toJSONG=function(){return new n(this.model,this.currentRemainingPaths,!0,this.isProgressive,this.forceCollect)},n.prototype.progressively=function(){return new n(this.model,this.currentRemainingPaths,this.isJSONGraph,!0,this.forceCollect)},n.prototype._subscribe=function(e){var n=[],c=this.model,h=e.isJSONG=this.isJSONGraph,u=this.isProgressive,l=t(c,this.currentRemainingPaths,e,u,h,[{}],n);if(!l){if(this.forceCollect){var p=c._root,a=p.cache,f=a.$_version;s(p,p.expired,o(a),c._maxSize,c._collectRatio,f)}return i}return r(this,c,l,e,n,1)};
},{"./../ModelResponse":"TLYW","./checkCacheAndReport":"6+ni","./getRequestCycle":"g/jf","./../../lru/collect":"rDUq","./../../support/getSize":"LNYZ"}],"wqjL":[function(require,module,exports) {
var e=require("falcor-path-syntax"),r=require("./../ModelResponse"),t=require("./validInput"),n=require("./../../support/validateInput"),u=require("./GetResponse");module.exports=function(){var a=n(arguments,t,"get");if(!0!==a)return new r(function(e){e.onError(a)});var o=e.fromPathsOrPathValues(arguments);return new u(this,o)};
},{"falcor-path-syntax":"Dqi5","./../ModelResponse":"TLYW","./validInput":"0vuS","./../../support/validateInput":"Hhzp","./GetResponse":"Lw2z"}],"jt3v":[function(require,module,exports) {
var e=require("./GetResponse");module.exports=function(r){return new e(this,r)};
},{"./GetResponse":"Lw2z"}],"PURn":[function(require,module,exports) {
module.exports={pathValue:!0,pathSyntax:!0,json:!0,jsonGraph:!0};
},{}],"nsph":[function(require,module,exports) {
module.exports=function(r,e){for(var n=-1,o=-1,t=r.length,f=[];++o<t;)for(var l=e(r[o],o,r),u=-1,a=l.length;++u<a;)f[++n]=l[u];return f};
},{}],"WEG+":[function(require,module,exports) {
var r=require("./../../support/array-flat-map");function t(r){return r.path}function p(r){return r.paths}module.exports=function(a,e){for(var u=a._root.errorSelector,n=-1,s=e.length,l=[],o=[],h={requestedPaths:l,optimizedPaths:o};++n<s;){var i=e[n],f=i.inputType,y=i.arguments;if(y.length>0){var m=(0,a["_set"+f])(a,y,null,u);o.push.apply(o,m[1]),"PathValues"===f?l.push.apply(l,y.map(t)):"JSONGs"===f?l.push.apply(l,r(y,p)):l.push.apply(l,m[0])}}return h};
},{"./../../support/array-flat-map":"nsph"}],"vUj4":[function(require,module,exports) {
var r=[],e=require("./../AssignableDisposable"),t=require("./../get/GetResponse"),o=require("./setGroupsIntoCache"),i=require("./../../get").getWithPathsAsPathMap,n=require("./../../errors/InvalidSourceError"),s=require("./../../errors/MaxRetryExceededError");function a(e,t){var o=e._path,i={};return e._path=r,e._getPathValuesAsJSONG(e._materialize().withoutDataSource(),t,[i]),e._path=o,i}function u(r,e,o,i,n){return new t(r,o,i,n,!0).subscribe(e)}module.exports=function r(t,c,l,h,p,f){var v,_=o(t,l),d=_.optimizedPaths,q=_.requestedPaths;if(f===t._maxRetries)return c.onError(new s(d)),{dispose:function(){}};if(void 0===t._source)return u(t,c,q,h,p);if(p){var E=i(t,q,[{}]);if(E.criticalError)return c.onError(E.criticalError),null;c.onNext(E.values[0]),v=t._root.cache.$_version}var g=a(t,d),b=new e,m=t._request.set(g,function(e,o){if(e instanceof n)c.onError(e);else{var i=!1;if((e||d.length===o.paths.length)&&(i=!0),p)if(!(t._root.cache.$_version!==v))return void c.onCompleted();i?b.currentDisposable=u(t,c,q,h,p):r(t,c,l,h,p,f+1)}});return b.currentDisposable=m,b};
},{"./../AssignableDisposable":"SoPT","./../get/GetResponse":"Lw2z","./setGroupsIntoCache":"WEG+","./../../get":"FSuO","./../../errors/InvalidSourceError":"sUqC","./../../errors/MaxRetryExceededError":"9G7F"}],"1aBS":[function(require,module,exports) {
var r=require("./../ModelResponse"),t=require("falcor-path-syntax"),e=Array.isArray,s=require("./../../support/isPathValue"),i=require("./../../support/isJSONGraphEnvelope"),o=require("./../../support/isJSONEnvelope"),p=require("./setRequestCycle"),a=module.exports=function(r,p,a,h){this._model=r,this._isJSONGraph=a||!1,this._isProgressive=h||!1,this._initialArgs=p,this._value=[{}];for(var u,n,l=[],_=-1,g=p.length;++_<g;){var y,v=p[_];e(v)||"string"==typeof v?(v=t.fromPath(v),y="PathValues"):s(v)?(v.path=t.fromPath(v.path),y="PathValues"):i(v)?y="JSONGs":o(v)&&(y="PathMaps"),n!==y&&(n=y,u={inputType:y,arguments:[]},l.push(u)),u.arguments.push(v)}this._groups=l};a.prototype=Object.create(r.prototype),a.prototype._subscribe=function(r){var t=this._groups,e=this._model,s=this._isJSONGraph,i=this._isProgressive;return p(e,r,t,s,i,0)},a.prototype._toJSONG=function(){return new a(this._model,this._initialArgs,!0,this._isProgressive)},a.prototype.progressively=function(){return new a(this._model,this._initialArgs,this._isJSONGraph,!0)};
},{"./../ModelResponse":"TLYW","falcor-path-syntax":"Dqi5","./../../support/isPathValue":"crkB","./../../support/isJSONGraphEnvelope":"OO1h","./../../support/isJSONEnvelope":"sC7O","./setRequestCycle":"vUj4"}],"JCOg":[function(require,module,exports) {
var e=require("./setValidInput"),r=require("./../../support/validateInput"),n=require("./SetResponse"),t=require("./../ModelResponse");module.exports=function(){var u=r(arguments,e,"set");if(!0!==u)return new t(function(e){e.onError(u)});for(var o=-1,i=arguments.length,s=[];++o<i;)s[o]=arguments[o];return new n(this,s)};
},{"./setValidInput":"PURn","./../../support/validateInput":"Hhzp","./SetResponse":"1aBS","./../ModelResponse":"TLYW"}],"8Xvs":[function(require,module,exports) {
var t=require("falcor-path-utils").toTree,e=require("../ModelResponse");function r(t,e){this.model=t,this.paths=e}r.prototype=Object.create(e.prototype),r.prototype._subscribe=function(e){var r=s(),o=this.model._root._pathObservers;return o.push({id:r,observer:e,paths:this.paths,pathMap:t(this.paths)}),{dispose:function(){var t=o.find(function(t){return t.id===r});t&&o.splice(o.indexOf(t),1)}}};var o=0;function s(){return o++}module.exports=r;
},{"falcor-path-utils":"GOy5","../ModelResponse":"TLYW"}],"Jaa8":[function(require,module,exports) {
var e=require("falcor-path-syntax"),r=require("../../support/validateInput"),n=require("../../response/get/validInput"),t=require("./ObserveResponse"),o=require("../ModelResponse");module.exports=function(){var s=r(arguments,n,"observe");if(!0!==s)return new o(function(e){e.onError(s)});var u=e.fromPathsOrPathValues(arguments);return new t(this,u)};
},{"falcor-path-syntax":"Dqi5","../../support/validateInput":"Hhzp","../../response/get/validInput":"0vuS","./ObserveResponse":"8Xvs","../ModelResponse":"TLYW"}],"gKet":[function(require,module,exports) {
var r=require("./applyErrorPrototype");function e(){var r=new Error("Deref can only be used with a non-primitive object from get, set, or call.");return r.name="InvalidDerefInputError",Object.setPrototypeOf&&Object.setPrototypeOf(r,Object.getPrototypeOf(this)),Error.captureStackTrace&&Error.captureStackTrace(r,e),r}r(e),module.exports=e;
},{"./applyErrorPrototype":"hlai"}],"h5cC":[function(require,module,exports) {
var e=require("./../errors/InvalidDerefInputError"),r=require("./../get/getCachePosition"),t="e",n=require("./../types/ref");module.exports=function(i){var o,a=i&&i.$__path,f=i&&i.$__refPath,_=i&&i.$__toReference;if(a){var h=t;if(_&&(h=!1,o=r(this,_),f&&o&&o.$type===n)){var u=o.value,p=0,s=f.length;for(h=!0;h&&p<s;++p)u[p]!==f[p]&&(h=!1)}return h?h===t&&(o=!0):o=!1,this._clone({_path:a,_referenceContainer:o})}throw new e};
},{"./../errors/InvalidDerefInputError":"gKet","./../get/getCachePosition":"VNuN","./../types/ref":"wLEx"}],"bn4y":[function(require,module,exports) {
module.exports=function(){var e=this._referenceContainer;return!this._allowFromWhenceYouCame||(!0===e||!1!==e&&((!e||void 0!==e.$_parent)&&(!e||!e.$_invalidated)))};
},{}],"/ySH":[function(require,module,exports) {
var r=require("./../response/ModelResponse"),e=require("falcor-path-syntax");module.exports=function(n){for(var o=e.fromPath(n),t=0,s=o.length;++t<s;)if("object"==typeof o[t])return new r(function(r){r.onError(new Error("Paths must be simple paths"))});var u=this;return new r(function(r){return u.get(o).subscribe(function(e){for(var n=e.json,t=-1,s=o.length;n&&++t<s;)n=n[o[t]];r.onNext(n)},function(e){r.onError(e)},function(){r.onCompleted()})})};
},{"./../response/ModelResponse":"TLYW","falcor-path-syntax":"Dqi5"}],"4bym":[function(require,module,exports) {
var r=require("falcor-json-graph"),e=require("./../response/ModelResponse"),n=require("./../support/isPathValue");module.exports=function(o,t){for(var u=n(o)?o:r.pathValue(o,t),s=0,i=u.path,a=i.length;++s<a;)if("object"==typeof i[s])return new e(function(r){r.onError(new Error("Paths must be simple paths"))});var p=this;return new e(function(r){return p.set(u).subscribe(function(e){for(var n=e.json,o=-1,t=i.length;n&&++o<t;)n=n[i[o]];r.onNext(n)},function(e){r.onError(e)},function(){r.onCompleted()})})};
},{"falcor-json-graph":"A6VP","./../response/ModelResponse":"TLYW","./../support/isPathValue":"crkB"}],"IMu3":[function(require,module,exports) {
var r=require("falcor-path-syntax"),t=require("./getValueSync");module.exports=function(e){var a=r.fromPath(e);if(!1===Array.isArray(a))throw new Error("Model#_getValueSync must be called with an Array path.");return this._path.length&&(a=this._path.concat(a)),this._syncCheck("getValueSync"),t(this,a).value};
},{"falcor-path-syntax":"Dqi5","./getValueSync":"lnLA"}],"Fp74":[function(require,module,exports) {
var t=require("falcor-path-syntax"),e=require("./../support/isPathValue"),r=require("./../set/setPathValues");module.exports=function(a,o,s,u){var h=t.fromPath(a),i=o,n=s,c=u;if(e(h)?(c=n,n=i,i=h):i={path:h,value:i},!1===e(i))throw new Error("Model#setValueSync must be called with an Array path.");return"function"!=typeof n&&(n=this._root._errorSelector),"function"!=typeof c&&(c=this._root._comparator),this._syncCheck("setValueSync"),r(this,[i]),this._getValueSync(i.path)};
},{"falcor-path-syntax":"Dqi5","./../support/isPathValue":"crkB","./../set/setPathValues":"t3P2"}],"8bbD":[function(require,module,exports) {
var r=require("falcor-path-syntax"),e=require("./../get/getBoundValue"),t=require("./../errors/InvalidModelError");module.exports=function(a){var o=r.fromPath(a);if(!Array.isArray(o))throw new Error("Model#derefSync must be called with an Array path.");var i=e(this,this._path.concat(o),!1),n=i.path,h=i.value;if(i.found&&void 0!==h){if(h.$type)throw new t(n,n);return this._clone({_path:n})}};
},{"falcor-path-syntax":"Dqi5","./../get/getBoundValue":"170P","./../errors/InvalidModelError":"fn83"}],"49aV":[function(require,module,exports) {
var r=require("./getValueSync");module.exports=function(e,o){var t=r({_boxed:!0,_root:e._root,_treatErrorsAsValues:e._treatErrorsAsValues},o,!0).value,u=t&&t.$_version;return null==u?-1:u};
},{"./getValueSync":"lnLA"}],"Netc":[function(require,module,exports) {
var e=require("falcor-path-utils").toTree,r=require("./../internal/ref"),t=require("./../types/ref"),i=require("./../get/getBoundValue"),n=require("./../lru/promote"),o=require("./../support/getSize"),u=require("./../support/isExpired"),s=require("./../support/isFunction"),p=require("./../support/isPrimitive"),a=require("./../support/expireNode"),l=require("falcor-path-utils").iterateKeySet,v=require("./../support/incrementVersion"),f=require("./../support/updateNodeAncestors"),d=require("./../support/removeNodeAndDescendants");function c(e,r,t,i,n,u,s,p){var a={},v=r<e.length-1,h=e[r],$=l(h,a);do{var _=q(t,i,n,$,v,!1,u,s,p),g=_[0],x=_[1];g&&(v?c(e,r+1,t,x,g,u,s,p):d(g,x,$,p,void 0)&&f(x,o(g),p,u)),$=l(h,a)}while(!a.done)}function h(e,t,i,o,s){if(u(t))return a(t,o,s),[void 0,e];n(s,t);var l=t,v=t.value,f=e;if(null!=(t=t.$_context))f=t.$_parent||e;else{var d=0,c=v.length-1;f=t=e;do{var h=q(e,f,t,v[d],d<c,!0,i,o,s);if(t=h[0],p(t))return h;f=h[1]}while(d++<c);if(l.$_context!==t){var $=t.$_refsLength||0;t.$_refsLength=$+1,t[r+$]=l,l.$_context=t,l.$_refIndex=$}}return[t,f]}function q(e,r,i,n,o,u,s,a,l){for(var v=i.$type;v===t;){var f=h(e,i,s,a,l);if(i=f[0],p(i))return f;r=f[1],v=i.$type}if(void 0!==v)return[i,r];if(null==n){if(o)throw new Error("`null` is not allowed in branch key positions.");i&&(n=i.$_key)}else i=(r=i)[n];return[i,r]}module.exports=function(r,t){for(var n=r._root,o=n,u=n.expired,p=v(),a=r._path,l=n.cache,f=a.length?i(r,a).value:l,d=f.$_parent||l,h=l.$_version,q=-1,$=t.length;++q<$;){c(t[q],0,l,d,f,p,u,o)}n.hasObservers()&&n.onObserve(t,e(t));var _=l.$_version,g=n.onChange;s(g)&&h!==_&&g()};
},{"falcor-path-utils":"GOy5","./../internal/ref":"hhAM","./../types/ref":"wLEx","./../get/getBoundValue":"170P","./../lru/promote":"DAC8","./../support/getSize":"LNYZ","./../support/isExpired":"tZba","./../support/isFunction":"PdPa","./../support/isPrimitive":"I3J4","./../support/expireNode":"uEXV","./../support/incrementVersion":"/mPE","./../support/updateNodeAncestors":"vcMd","./../support/removeNodeAndDescendants":"QqkK"}],"2LYN":[function(require,module,exports) {
var e=require("falcor-path-utils"),r=e.toTree,t=e.toPaths,i=require("../support/createHardlink"),o=require("./../internal/reservedPrefix"),n=require("./../types/ref"),u=require("./../get/getBoundValue"),p=require("./../lru/promote"),s=require("./../support/getSize"),a=require("./../support/hasOwn"),l=require("./../support/isObject"),c=require("./../support/isExpired"),v=require("./../support/isFunction"),f=require("./../support/isPrimitive"),d=require("./../support/expireNode"),q=require("./../support/incrementVersion"),h=require("./../support/updateNodeAncestors"),$=require("./../support/removeNodeAndDescendants");function _(e,r,t,i,n,u,p,c,v,d){if(!f(e)&&!e.$type)for(var q in e)if(q[0]!==o&&a(e,q)){var g=e[q],y=l(g)&&!g.$type,m=x(t,i,n,q,g,y,!1,u,p,c,v,d),w=m[0],b=m[1];w&&(y?_(g,r+1,t,b,w,u,p,c,v,d):$(w,b,q,c)&&h(b,s(w),c,u))}}function g(e,r,t,o,n,u,s,a){if(c(t))return d(t,n,u),[void 0,r];p(u,t);var l=t,v=t.value,q=r;if(null!=(t=t.$_context))q=t.$_parent||r;else{var h=0,$=v.length-1;q=t=r;do{var _=x(r,q,t,v[h],e,h<$,!0,o,n,u,s,a);if(t=_[0],f(t))return _;q=_[1]}while(h++<$);l.$_context!==t&&i(l,t)}return[t,q]}function x(e,r,t,i,o,u,p,s,a,l,c,v){for(var d=t.$type;d===n;){var q=g(o,e,t,s,a,l,c,v);if(t=q[0],f(t))return q;r=q[1],d=t&&t.$type}if(void 0!==d)return[t,r];if(null==i){if(u)throw new Error("`null` is not allowed in branch key positions.");t&&(i=t.$_key)}else t=(r=t)[i];return[t,r]}module.exports=function(e,i){for(var o=e._root,n=o,p=o.expired,s=q(),a=o._comparator,l=o._errorSelector,c=e._path,f=o.cache,d=c.length?u(e,c).value:f,h=d.$_parent||f,$=f.$_version,g=-1,x=i.length;++g<x;){_(i[g].json,0,f,h,d,s,p,n,a,l)}if(o.hasObservers()){var y=i.reduce(function(e,r){return e.concat(t(r.json))},[]),m=r(y);o.onObserve(y,m)}var w=f.$_version,b=o.onChange;v(b)&&$!==w&&b()};
},{"falcor-path-utils":"GOy5","../support/createHardlink":"RaVg","./../internal/reservedPrefix":"cTsu","./../types/ref":"wLEx","./../get/getBoundValue":"170P","./../lru/promote":"DAC8","./../support/getSize":"LNYZ","./../support/hasOwn":"xzHV","./../support/isObject":"VKa5","./../support/isExpired":"tZba","./../support/isFunction":"PdPa","./../support/isPrimitive":"I3J4","./../support/expireNode":"uEXV","./../support/incrementVersion":"/mPE","./../support/updateNodeAncestors":"vcMd","./../support/removeNodeAndDescendants":"QqkK"}],"91Q+":[function(require,module,exports) {
var e=require("./ModelRoot"),t=require("./ModelDataSourceAdapter"),r=require("./request/RequestQueueV2"),o=require("./response/ModelResponse"),a=require("./response/CallResponse"),s=require("./response/InvalidateResponse"),i=require("./schedulers/ASAPScheduler"),n=require("./schedulers/TimeoutScheduler"),p=require("./schedulers/ImmediateScheduler"),u=require("./support/array-clone"),h=require("./support/array-slice"),l=require("./lru/collect"),c=require("falcor-path-syntax"),_=require("./support/getSize"),y=require("./support/isObject"),d=require("./support/isPrimitive"),f=require("./support/isJSONEnvelope"),m=require("./support/isJSONGraphEnvelope"),q=require("./set/setPathMaps"),v=require("./set/setJSONGraphs"),g=require("falcor-json-graph"),S=0,w=require("./support/validateInput"),P=function(){},V=require("./get/getCache"),x=require("./get"),A=require("./response/get/validInput");function b(t){var o=t||{};this._root=o._root||new e(o),this._path=o.path||o._path||[],this._scheduler=o.scheduler||o._scheduler||new p,this._source=o.source||o._source,this._request=o.request||o._request||new r(this,this._scheduler),this._ID=S++,"number"==typeof o.maxSize?this._maxSize=o.maxSize:this._maxSize=o._maxSize||b.prototype._maxSize,"number"==typeof o.maxRetries?this._maxRetries=o.maxRetries:this._maxRetries=o._maxRetries||b.prototype._maxRetries,"number"==typeof o.collectRatio?this._collectRatio=o.collectRatio:this._collectRatio=o._collectRatio||b.prototype._collectRatio,(o.boxed||o.hasOwnProperty("_boxed"))&&(this._boxed=o.boxed||o._boxed),(o.materialized||o.hasOwnProperty("_materialized"))&&(this._materialized=o.materialized||o._materialized),"boolean"==typeof o.treatErrorsAsValues?this._treatErrorsAsValues=o.treatErrorsAsValues:o.hasOwnProperty("_treatErrorsAsValues")&&(this._treatErrorsAsValues=o._treatErrorsAsValues),this._useServerPaths=o._useServerPaths||!1,this._allowFromWhenceYouCame=o.allowFromWhenceYouCame||o._allowFromWhenceYouCame||!1,this._treatDataSourceErrorsAsJSONGraphErrors=o._treatDataSourceErrorsAsJSONGraphErrors||!1,o.cache&&this.setCache(o.cache)}module.exports=b,b.ref=g.ref,b.atom=g.atom,b.error=g.error,b.pathValue=g.pathValue,b.prototype.constructor=b,b.prototype._materialized=!1,b.prototype._boxed=!1,b.prototype._progressive=!1,b.prototype._treatErrorsAsValues=!1,b.prototype._maxSize=Math.pow(2,53)-1,b.prototype._maxRetries=3,b.prototype._collectRatio=.75,b.prototype.get=require("./response/get"),b.prototype._getOptimizedBoundPath=function(){return u(this._path)},b.prototype._getWithPaths=require("./response/get/getWithPaths"),b.prototype.set=require("./response/set"),b.prototype.observe=require("./response/observe"),b.prototype.preload=function(){var e=w(arguments,A,"preload");if(!0!==e)return new o(function(t){t.onError(e)});var t=Array.prototype.slice.call(arguments),r=this;return new o(function(e){return r.get.apply(r,t).subscribe(function(){},function(t){e.onError(t)},function(){e.onCompleted()})})},b.prototype.call=function(){var e,t=-1,r=arguments.length;for(e=new Array(r);++t<r;){var s=arguments[t];e[t]=s;var i=typeof s;if(t>1&&!Array.isArray(s)||0===t&&!Array.isArray(s)&&"string"!==i||1===t&&!Array.isArray(s)&&!d(s))return new o(function(e){e.onError(new Error("Invalid argument"))})}return new a(this,e[0],e[1],e[2],e[3])},b.prototype.invalidate=function(){var e,t=-1,r=arguments.length;for(e=[];++t<r;)if(e[t]=c.fromPath(arguments[t]),!Array.isArray(e[t])||!e[t].length)throw new Error("Invalid argument");new s(this,e).subscribe(P,function(e){throw e})},b.prototype.deref=require("./deref"),b.prototype._hasValidParentReference=require("./deref/hasValidParentReference"),b.prototype.getValue=require("./get/getValue"),b.prototype.setValue=require("./set/setValue"),b.prototype._getValueSync=require("./get/sync"),b.prototype._setValueSync=require("./set/sync"),b.prototype._derefSync=require("./deref/sync"),b.prototype.setCache=function(e){var t=this._root.cache;if(e!==t){var r,o=this._root,a=this._path;this._path=[],this._root.cache={},void 0!==t&&l(o,o.expired,_(t),0),m(e)?r=v(this,[e])[0]:f(e)?r=q(this,[e])[0]:y(e)&&(r=q(this,[{json:e}])[0]),r&&x.getWithPathsAsPathMap(this,r,[]),this._path=a}else void 0===t&&(this._root.cache={});return this},b.prototype.getCache=function(){var e=h(arguments);if(0===e.length)return V(this._root.cache);var t=[{}],r=this._path;return x.getWithPathsAsJSONGraph(this,e,t),this._path=r,t[0].jsonGraph},b.prototype._setMaxSize=function(e){var t=this._maxSize;if(this._maxSize=e,e<t){var r=this._root,o=r.cache,a=o.$_version;l(r,r.expired,_(o),this._maxSize,this._collectRatio,a)}},b.prototype.getVersion=function(e){var t=e&&c.fromPath(e)||[];if(!1===Array.isArray(t))throw new Error("Model#getVersion must be called with an Array path.");return this._path.length&&(t=this._path.concat(t)),this._getVersion(this,t)},b.prototype._syncCheck=function(e){if(Boolean(this._source)&&this._root.syncRefCount<=0&&!1===this._root.unsafeMode)throw new Error("Model#"+e+" may only be called within the context of a request selector.");return!0},b.prototype._clone=function(e){var t=new this.constructor(this);for(var r in e){var o=e[r];"delete"===o?delete t[r]:t[r]=o}return t.setCache=void 0,t},b.prototype.batch=function(e){var t=e;"number"==typeof t?t=new n(Math.round(Math.abs(t))):t&&t.schedule||(t=new i);var o=this._clone();return o._request=new r(o,t),o},b.prototype.unbatch=function(){var e=this._clone();return e._request=new r(e,new p),e},b.prototype.treatErrorsAsValues=function(){return this._clone({_treatErrorsAsValues:!0})},b.prototype.asDataSource=function(){return new t(this)},b.prototype._materialize=function(){return this._clone({_materialized:!0})},b.prototype._dematerialize=function(){return this._clone({_materialized:"delete"})},b.prototype.boxValues=function(){return this._clone({_boxed:!0})},b.prototype.unboxValues=function(){return this._clone({_boxed:"delete"})},b.prototype.withoutDataSource=function(){return this._clone({_source:"delete"})},b.prototype.toJSON=function(){return{$type:"ref",value:this._path}},b.prototype.getPath=function(){return u(this._path)},b.prototype._fromWhenceYouCame=function(e){return this._clone({_allowFromWhenceYouCame:void 0===e||e})},b.prototype._getBoundValue=require("./get/getBoundValue"),b.prototype._getVersion=require("./get/getVersion"),b.prototype._getPathValuesAsPathMap=x.getWithPathsAsPathMap,b.prototype._getPathValuesAsJSONG=x.getWithPathsAsJSONGraph,b.prototype._setPathValues=require("./set/setPathValues"),b.prototype._setPathMaps=require("./set/setPathMaps"),b.prototype._setJSONGs=require("./set/setJSONGraphs"),b.prototype._setCache=require("./set/setPathMaps"),b.prototype._invalidatePathValues=require("./invalidate/invalidatePathSets"),b.prototype._invalidatePathMaps=require("./invalidate/invalidatePathMaps");
},{"./ModelRoot":"i63l","./ModelDataSourceAdapter":"VjZC","./request/RequestQueueV2":"PoQp","./response/ModelResponse":"TLYW","./response/CallResponse":"/wx3","./response/InvalidateResponse":"jr6Y","./schedulers/ASAPScheduler":"4k6S","./schedulers/TimeoutScheduler":"maeE","./schedulers/ImmediateScheduler":"tSs+","./support/array-clone":"dDA6","./support/array-slice":"rEt7","./lru/collect":"rDUq","falcor-path-syntax":"Dqi5","./support/getSize":"LNYZ","./support/isObject":"VKa5","./support/isPrimitive":"I3J4","./support/isJSONEnvelope":"sC7O","./support/isJSONGraphEnvelope":"OO1h","./set/setPathMaps":"U40X","./set/setJSONGraphs":"T5SZ","falcor-json-graph":"A6VP","./support/validateInput":"Hhzp","./get/getCache":"Dntp","./get":"FSuO","./response/get/validInput":"0vuS","./response/get":"wqjL","./response/get/getWithPaths":"jt3v","./response/set":"JCOg","./response/observe":"Jaa8","./deref":"h5cC","./deref/hasValidParentReference":"bn4y","./get/getValue":"/ySH","./set/setValue":"4bym","./get/sync":"IMu3","./set/sync":"Fp74","./deref/sync":"8bbD","./get/getBoundValue":"170P","./get/getVersion":"49aV","./set/setPathValues":"t3P2","./invalidate/invalidatePathSets":"Netc","./invalidate/invalidatePathMaps":"2LYN"}],"5kam":[function(require,module,exports) {
"use strict";function e(t){return new e.Model(t)}e.keys=function(e){if(e)return Object.keys(e).filter(function(e){return"$__path"!==e})},module.exports=e,e.Model=require("./Model");
},{"./Model":"91Q+"}],"8MgT":[function(require,module,exports) {
"use strict";

function e(e, t) {
        if (null === e) return null;
        if (0 === e) return "0";
        t = !t || t < 0 ? 0 : t;
        var s = e.toPrecision(2).split("e"), i = 1 === s.length ? 0 : Math.floor(Math.min(s[1].slice(1), 14) / 3), r = i < 1 ? e.toFixed(0 + t) : (e / Math.pow(10, 3 * i)).toFixed(1 + t);
        return (r < 0 ? r : Math.abs(r)) + [ "", "K", "M", "B", "T" ][i];
}

Object.defineProperty(exports, "__esModule", {
        value: !0
}), exports.abbreviateNumber = e;

const t = exports.nfVideoInfoPath = (e => [ [ "videos", e += "", "boxarts", [ "_1920x1080", "_342x192", "_342x684", "_112x63" ], "jpg" ], [ "videos", e, [ "creators", "directors", "writers" ], {
        from: 0,
        to: 3
}, [ "id", "name" ] ], [ "videos", e, [ "displayRuntime", "interactiveBookmark", "runtime", "title", "userRating" ] ], [ "videos", e, [ "summary", "availabilityEndDateNear", "delivery", "episodeBadges", "episodeCount", "maturity", "numSeasonsLabel", "releaseYear", "runtime", "seasonCount", "synopsis" ] ], [ "videos", e, "seasonList", "current", "summary" ], [ "videos", e, [ "data", "dpSupplementalMessage", "evidence", "regularSynopsis", "requestId" ] ] ]);
},{}],"OvzY":[function(require,module,exports) {
var e=function(e,t,n){"use strict";if(e.MutationObserver&&"undefined"!=typeof HTMLElement){var r,i=0,o=(r=HTMLElement.prototype.matches||HTMLElement.prototype.webkitMatchesSelector||HTMLElement.prototype.mozMatchesSelector||HTMLElement.prototype.msMatchesSelector,{matchesSelector:function(e,t){return e instanceof HTMLElement&&r.call(e,t)},addMethod:function(e,t,n){var r=e[t];e[t]=function(){return n.length==arguments.length?n.apply(this,arguments):"function"==typeof r?r.apply(this,arguments):void 0}},callCallbacks:function(e,t){t&&t.options.onceOnly&&1==t.firedElems.length&&(e=[e[0]]);for(var n,r=0;n=e[r];r++)n&&n.callback&&n.callback.call(n.elem,n.elem);t&&t.options.onceOnly&&1==t.firedElems.length&&t.me.unbindEventWithSelectorAndCallback.call(t.target,t.selector,t.callback)},checkChildNodesRecursively:function(e,t,n,r){for(var i,l=0;i=e[l];l++)n(i,t,r)&&r.push({callback:t.callback,elem:i}),i.childNodes.length>0&&o.checkChildNodesRecursively(i.childNodes,t,n,r)},mergeArrays:function(e,t){var n,r={};for(n in e)e.hasOwnProperty(n)&&(r[n]=e[n]);for(n in t)t.hasOwnProperty(n)&&(r[n]=t[n]);return r},toElementsArray:function(t){return void 0===t||"number"==typeof t.length&&t!==e||(t=[t]),t}}),l=function(){var e=function(){this._eventsBucket=[],this._beforeAdding=null,this._beforeRemoving=null};return e.prototype.addEvent=function(e,t,n,r){var i={target:e,selector:t,options:n,callback:r,firedElems:[]};return this._beforeAdding&&this._beforeAdding(i),this._eventsBucket.push(i),i},e.prototype.removeEvent=function(e){for(var t,n=this._eventsBucket.length-1;t=this._eventsBucket[n];n--)if(e(t)){this._beforeRemoving&&this._beforeRemoving(t);var r=this._eventsBucket.splice(n,1);r&&r.length&&(r[0].callback=null)}},e.prototype.beforeAdding=function(e){this._beforeAdding=e},e.prototype.beforeRemoving=function(e){this._beforeRemoving=e},e}(),c=function(t,r){var i=new l,c=this,a={fireOnAttributesModification:!1};return i.beforeAdding(function(n){var i,o=n.target;o!==e.document&&o!==e||(o=document.getElementsByTagName("html")[0]),i=new MutationObserver(function(e){r.call(this,e,n)});var l=t(n.options);i.observe(o,l),n.observer=i,n.me=c}),i.beforeRemoving(function(e){e.observer.disconnect()}),this.bindEvent=function(e,t,n){t=o.mergeArrays(a,t);for(var r=o.toElementsArray(this),l=0;l<r.length;l++)i.addEvent(r[l],e,t,n)},this.unbindEvent=function(){var e=o.toElementsArray(this);i.removeEvent(function(t){for(var r=0;r<e.length;r++)if(this===n||t.target===e[r])return!0;return!1})},this.unbindEventWithSelectorOrCallback=function(e){var t,r=o.toElementsArray(this),l=e;t="function"==typeof e?function(e){for(var t=0;t<r.length;t++)if((this===n||e.target===r[t])&&e.callback===l)return!0;return!1}:function(t){for(var i=0;i<r.length;i++)if((this===n||t.target===r[i])&&t.selector===e)return!0;return!1},i.removeEvent(t)},this.unbindEventWithSelectorAndCallback=function(e,t){var r=o.toElementsArray(this);i.removeEvent(function(i){for(var o=0;o<r.length;o++)if((this===n||i.target===r[o])&&i.selector===e&&i.callback===t)return!0;return!1})},this},a=new function(){var e={fireOnAttributesModification:!1,onceOnly:!1,existing:!1};function t(e,t,r){return!(!o.matchesSelector(e,t.selector)||(e._id===n&&(e._id=i++),-1!=t.firedElems.indexOf(e._id))||(t.firedElems.push(e._id),0))}var r=(a=new c(function(e){var t={attributes:!1,childList:!0,subtree:!0};return e.fireOnAttributesModification&&(t.attributes=!0),t},function(e,n){e.forEach(function(e){var r=e.addedNodes,i=e.target,l=[];null!==r&&r.length>0?o.checkChildNodesRecursively(r,n,t,l):"attributes"===e.type&&t(i,n)&&l.push({callback:n.callback,elem:i}),o.callCallbacks(l,n)})})).bindEvent;return a.bindEvent=function(t,n,i){void 0===i?(i=n,n=e):n=o.mergeArrays(e,n);var l=o.toElementsArray(this);if(n.existing){for(var c=[],a=0;a<l.length;a++)for(var s=l[a].querySelectorAll(t),u=0;u<s.length;u++)c.push({callback:i,elem:s[u]});if(n.onceOnly&&c.length)return i.call(c[0].elem,c[0].elem);setTimeout(o.callCallbacks,1,c)}r.call(this,t,n,i)},a},s=new function(){var e={};function t(e,t){return o.matchesSelector(e,t.selector)}var n=(s=new c(function(){return{childList:!0,subtree:!0}},function(e,n){e.forEach(function(e){var r=e.removedNodes,i=[];null!==r&&r.length>0&&o.checkChildNodesRecursively(r,n,t,i),o.callCallbacks(i,n)})})).bindEvent;return s.bindEvent=function(t,r,i){void 0===i?(i=r,r=e):r=o.mergeArrays(e,r),n.call(this,t,r,i)},s};t&&f(t.fn),f(HTMLElement.prototype),f(NodeList.prototype),f(HTMLCollection.prototype),f(HTMLDocument.prototype),f(Window.prototype);var u={};return d(a,u,"unbindAllArrive"),d(s,u,"unbindAllLeave"),u}function d(e,t,n){o.addMethod(t,n,e.unbindEvent),o.addMethod(t,n,e.unbindEventWithSelectorOrCallback),o.addMethod(t,n,e.unbindEventWithSelectorAndCallback)}function f(e){e.arrive=a.bindEvent,d(a,e,"unbindArrive"),e.leave=s.bindEvent,d(s,e,"unbindLeave")}}(window,"undefined"==typeof jQuery?null:jQuery,void 0);
},{}],"xso1":[function(require,module,exports) {
"use strict";

Object.defineProperty(exports, "__esModule", {
        value: !0
});

let e = class {
        constructor(e = {}) {
                this.namespace = e.namespace || "extension";
        }
}, s = class extends e {
        constructor(e = {}) {
                super(e), this.port = chrome.runtime.connect({
                        name: this.namespace
                });
        }
        proxyMessages() {
                this.port.onMessage.addListener(e => {
                        e.sender = "bg", e.ns = this.namespace, window.postMessage(e, "*");
                }), window.addEventListener("message", e => {
                        const s = e.data && "bg" !== e.data.sender && e.data.ns === this.namespace;
                        s && this.port.postMessage(e.data);
                });
        }
}, a = class extends e {
        constructor(e = {}) {
                super(e);
        }
        onMessage(e) {
                window.addEventListener("message", s => {
                        const a = s.data && "page" !== s.data.sender && s.data.ns === this.namespace;
                        a && e(s.data);
                });
        }
        postMessage(e) {
                e.sender = "page", e.ns = this.namespace, window.postMessage(e, document.location.origin);
        }
};

exports.CSMessaging = s, exports.PageMessaging = a;
},{}],"FcC3":[function(require,module,exports) {
"use strict";

var t = require("falcor"), e = s(t), n = require("./utils"), a = require("arrive"), i = s(a), r = require("./messaging");

function s(t) {
        return t && t.__esModule ? t : {
                default: t
        };
}

const o = new r.PageMessaging(), c = {};

function d() {
        try {
                return window.netflix.reactContext.models.playerModel.data.config.ui.initParams.apiUrl;
        } catch (t) {}
}

function l(t) {
        if (!t.href) return null;
        let e = t.href.match(/\d+/);
        if (!e) return null;
        let n = String(e[0]), a = t.querySelector(".fallback-text");
        if (!a) return null;
        let i = String(a.innerText);
        if (!i) return null;
        let r = t.querySelector("img.boxart-image");
        return r ? {
                netflixId: n,
                title: i,
                thumbnail: r.getAttribute("src")
        } : [ n, i, null ];
}

window.shaktiCache = c;

var u = "v66c6d3ba";

function m() {
        try {
                return `https://www.netflix.com/nq/website/memberapi/${u = window.netflix.reactContext.models.serverDefs.data.BUILD_IDENTIFIER}/pathEvaluator`;
        } catch (t) {
                return "https://www.netflix.com/nq/website/memberapi/v66c6d3ba/pathEvaluator";
        }
}

async function f(t, a = "en") {
        const i = `${m()}?falcor_server=0.1.0&&original_path=%2Fshakti%2F${u}%2FpathEvaluator&languages=${a}`, r = (0, 
        n.nfVideoInfoPath)(t), s = r.map(t => encodeURIComponent("path") + "=" + encodeURIComponent(JSON.stringify(t))).join("&"), o = await fetch(i, {
                method: "POST",
                credentials: "include",
                body: s,
                headers: {
                        "Content-Type": "application/x-www-form-urlencoded;charset=UTF-8",
                        "x-imdb4nf": !0
                }
        }), c = await o.json();
        if (!c) return !1;
        const d = new e.default.Model();
        let l = await d.set(c);
        if ((l = JSON.parse(JSON.stringify(l, (t, e) => "$__path" === t ? void 0 : e))) && l.json && 0 === Object.keys(l.json).length) return !1;
        const f = l.json.videos[t];
        return !(!f || !f.title) && (f && f.summary && (f.type = "show" === f.summary.type ? "series" : "movie"), 
        f && f.releaseYear && f.seasonCount && (f.effectiveReleaseYear = f.releaseYear - (f.seasonCount - 1)), 
        f);
}

window.fetchShaktiData = f;

const h = async (t, e, n = "") => {
        const a = await f(e);
        o.postMessage({
                action: "check",
                nfId: e,
                shakti: a,
                locale: d(),
                url: document.location.href
        });
        const i = `\n  <span data-imdb4nf-container class="context-${n}">\n    <a data-imdb4nf data-imdb4nf-id="${e}">\n      <span class="imdb4nf-prefix"></span>\n      <span class="imdb4nf-rating"></span>\n      <span class="imdb4nf-votes"></span>\n    </a>\n  </span>\n  `;
        t.insertAdjacentHTML("afterEnd", i.trim());
};

document.arrive("a.slider-refocus", {
        existing: !0
}, function() {
        try {
                const t = l(this);
                this.addEventListener("mouseover", () => {
                        document.documentElement.dataset.lastFocus = JSON.stringify(t);
                }, !1);
        } catch (t) {}
}), document.arrive(".bob-overlay", {
        existing: !0
}, function() {
        try {
                if (this.parentElement.querySelector("[data-imdb4nf-container]")) return;
                const t = this.closest(".title-card").querySelector("a[href^='/watch/']").getAttribute("href").replace("/watch/", "").split("?")[0];
                h(this, t);
        } catch (t) {}
}), document.arrive(".bob-overlay", {
        existing: !0
}, function() {
        try {
                if (this.parentElement.querySelector("[data-imdb4nf-container]")) return;
                const t = this.closest(".title-card").querySelector("a[href^='/watch/']").getAttribute("href").replace("/watch/", "").split("?")[0];
                h(this, t);
        } catch (t) {}
}), document.arrive("div.mini-modal .previewModal--boxart", {
        existing: !0
}, function() {
        try {
                if (this.parentElement.querySelector("[data-imdb4nf-container]")) return;
                const t = (document.location.href.match(/\d+/) || [])[0];
                if (!document.documentElement.dataset.lastFocus && !t) return;
                let e = null;
                if (document.documentElement.dataset.lastFocus) {
                        e = JSON.parse(document.documentElement.dataset.lastFocus).netflixId;
                } else e = t;
                h(this, e, "mini-modal");
        } catch (t) {}
}), document.arrive("div.detail-modal .previewModal--player-titleTreatmentWrapper", {
        existing: !0
}, function() {
        try {
                if (this.parentElement.querySelector("[data-imdb4nf-container]")) return;
                const t = (document.location.href.match(/\d+/) || [])[0];
                if (!document.documentElement.dataset.lastFocus && !t) return;
                let e = null;
                if (document.documentElement.dataset.lastFocus) {
                        e = JSON.parse(document.documentElement.dataset.lastFocus).netflixId;
                } else e = t;
                h(this, e, "detail-modal");
        } catch (t) {}
}), document.arrive(".jawBoneContainer .overview .duration", {
        existing: !0
}, function() {
        try {
                if (this.parentElement.querySelector("[data-imdb4nf-container]")) return;
                const t = this.closest(".jawBoneContainer").getAttribute("id");
                h(this, t);
        } catch (t) {}
}), document.arrive(".jawBoneContainer .slider .duration", {
        existing: !0
}, function() {
        try {
                if (this.parentElement.querySelector("[data-imdb4nf-container]")) return;
                const t = this.closest(".slider-item").querySelector("[data-ui-tracking-context]").getAttribute("data-ui-tracking-context").match(/%22video_id%22:(\d+)/).slice(1)[0];
                h(this, t);
        } catch (t) {}
}), o.onMessage(t => {
        t.action && "check" === t.action && document.querySelectorAll(`[data-imdb4nf-id='${t.nfId}']`).forEach(function(e) {
                const n = t.meta;
                if (!n) return;
                const a = t.look || "minimal";
                if (e.classList.add(`look-${a}`), "notfound" === n || !n.imdbid) return e.querySelector(".imdb4nf-votes").dataset.votes = 0, 
                e.classList.add("has-data"), e.classList.add("not-found"), void e.setAttribute("title", "Didn't find the IMDb id for this title (yet!)");
                const i = !n.imdbrating;
                i && e.classList.add("is-empty");
                let r = [];
                if (n.title) {
                        let t = n.title;
                        n.year && (t += ` (${n.year})`), r.push(t), r.push("");
                }
                i && r.push("IMDb rating will be available later, please click to open the IMDb page for this title.\n"), 
                n.imdbrating && r.push(`IMDb Rating: ${n.imdbrating}/10 (${n.imdbvotes} votes)`), 
                n.metascore && r.push(`Metascore: ${n.metascore}/100`), n.rtrating && r.push(`Rotten Tomatoes: ${n.rtrating}`), 
                n.genre && r.push(`Genre: ${n.genre}`), n.awards && r.push(`Awards: ${n.awards}`), 
                n.country && r.push(`Country: ${n.country}`), n.plot && r.push(`\n${n.plot}`), r = r.join("\n"), 
                e.setAttribute("title", r);
                const s = n.imdbrating_num || 0, o = n.imdbvotes_num || 0;
                s > 7.9 && o > 2e4 && e.classList.add("is-great"), s < 6.2 && o > 2e3 && e.classList.add("is-bad"), 
                e.setAttribute("href", `http://www.imdb.com/title/${n.imdbid}/`), e.setAttribute("target", "_blank"), 
                e.addEventListener("click", function(t) {
                        t.preventDefault(), t.stopPropagation(), window.open(this.getAttribute("href"), "_blank");
                }, !0), e.querySelector(".imdb4nf-rating").dataset.rating = n.imdbrating, e.querySelector(".imdb4nf-votes").dataset.votes = n.imdbvotes_human, 
                e.dataset.votes = n.imdbvotes_human, e.classList.add("has-data");
        });
});
},{"falcor":"5kam","./utils":"8MgT","arrive":"OvzY","./messaging":"xso1"}]},{},["FcC3"], null)